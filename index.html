<!DOCTYPE HTML>
<!DOCTYPE html PUBLIC "" ""><HTML lang="en">
<HEAD>
<META content="IE=11.0000"http-equiv="X-UA-Compatible">     
<META charset="UTF-8">
<META name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta name="description" content="An open source orbital launch vehicle (rocket) payload calculator by Launcher" />
<link rel="shortcut icon" type="image/png" href="favicon.png"/>
<TITLE>Launcher Calculator</TITLE>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;700;900&display=swap" rel="stylesheet">
<STYLE>
input[type=range] {
  -webkit-appearance: none;
  margin: 10px 0;
  width: 100%;
}
input[type=range]:focus {
  outline: none;
}
input[type=range]::-webkit-slider-runnable-track {
  width: 100%;
  height: 1px;
  cursor: pointer;
  animate: 0.2s;
  box-shadow: 0px 0px 0px #000000;
  background: #eeeff1;
  border-radius: 6px;
  border: 1px solid #eeeff1;
}
input[type=range]::-webkit-slider-thumb {
  box-shadow: 0px 0px 1px #000000;
  border: 0px solid #000000;
  height: 15px;
  width: 15px;
  border-radius: 42px;
  background: #000000;
  cursor: pointer;
  -webkit-appearance: none;
  margin-top: -9px;
}
input[type=range]:focus::-webkit-slider-runnable-track {
  background: #eeeff1;
}
input[type=range]::-moz-range-track {
  width: 100%;
  height: 1px;
  cursor: pointer;
  animate: 0.2s;
  box-shadow: 0px 0px 0px #000000;
  background: #eeeff1;
  border-radius: 6px;
  border: 1px solid #eeeff1;
}
input[type=range]::-moz-range-thumb {
  box-shadow: 0px 0px 1px #000000;
  border: 0px solid #000000;
  height: 15px;
  width: 15px;
  border-radius: 42px;
  background: #000000;
  cursor: pointer;
}
input[type=range]::-ms-track {
  width: 100%;
  height: 1px;
  cursor: pointer;
  animate: 0.2s;
  background: transparent;
  border-color: transparent;
  color: transparent;
}
input[type=range]::-ms-fill-lower {
  background: #eeeff1;
  border: 1px solid #eeeff1;
  border-radius: 12px;
  box-shadow: 0px 0px 0px #000000;
}
input[type=range]::-ms-fill-upper {
  background: #eeeff1;
  border: 1px solid #eeeff1;
  border-radius: 12px;
  box-shadow: 0px 0px 0px #000000;
}
input[type=range]::-ms-thumb {
  box-shadow: 0px 0px 1px #000000;
  border: 0px solid #000000;
  height: 15px;
  width: 15px;
  border-radius: 42px;
  background: #000000;
  cursor: pointer;
}
input[type=range]:focus::-ms-fill-lower {
  background: #eeeff1;
}
input[type=range]:focus::-ms-fill-upper {
  background: #eeeff1;
}



/* The Modal (background) */
.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  padding-top: 100px; /* Location of the box */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

/* Modal Content */
.modal-content {
  background-color: #fefefe;
  margin: auto;
  padding: 20px 0;
  border: 1px solid #888;
  width: 80%;
  position: fixed;
    top: 5%;
    left: 0;
    right: 0;
    /* overflow-y: scroll; */
    height: calc(100% - 20%);
}
#modelContentGroup{
	overflow-y: auto;
    height: calc(100% - 30px);
	width: 100%;
}
#modelTitle{margin: 0;
    float: left;
	padding: 0 0 16px 20px;}
.model-header{
	width: 100%;
	border-bottom: 1px solid #cccc;
	height: auto;
    overflow: hidden;
}
/* The Close Button */
.close {
  color: #aaaaaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
  margin: -10px 20px 0px 0;
}
#popupContent{
	padding: 0 30px;
    text-align: justify;
}
#popupContent p{ font-size: 16px;}
.close:hover,
.close:focus {
  color: #000;
  text-decoration: none;
  cursor: pointer;
}
	h8 {display:inline-block; text-align:right; width:128px;padding: 10px 0;}
	h9 {display:inline-block; text-align:right;padding: 4px 0;width:128px}

	body {
		font-family: 'Montserrat', sans-serif !important;
		font-weight: 500;
		margin: 0;
		padding: 0;
		background-color: #fafbff;
		background-position: top;
		background-repeat: repeat;
		background-attachment: fixed;
		font-family: "Verdana", sans-serif;
		font-size: 1.2em;
		text-align: center;
		}
	html, body {
		min-height: 100%;
		height: 100%;
		}
	.content {
			background-color: #ffffff;
			display: inline-block;
			text-align: left;
			max-width:1800px;
			height: auto;
    		overflow: hidden;
		}
		input{width:64px; text-align: right; font-size: 1.1em;}
		input[type=range]{width:96px;}
		select{font-size: 1.1em;}
	.info {
			background-color: gainsboro;
			padding: 15px;
			position: fixed;
			bottom: 0;
			right: 0;
		}
	table {
			border-collapse: collapse;
		}
	ul {
		margin: 0;
		}
	.preview {
			background-color: black;
			color: #fff;
			text-align: center;
			padding: 5px 5px;
			border-radius: 6px;
 			position: fixed;
		}
	.launcher-header{
		display: block;
		list-style: none;
		height: auto;
		overflow: hidden;
		padding: 0;
		margin-bottom: 0;
		padding: 20px 20px 8px 20px;
		border-bottom: 1px solid #eeeff1;
	}
	.headerTitle{padding-right: 20px;width: calc(40% - 35px);max-width: 530px;float: left;}
	.secondHeader{padding-right: 40px !important;float: left; width:calc(30% - 30px);}
	.lastChild{width: 30%;float: right;}
	.secondHeader font, .lastChild font{font-weight: 600;}
	.logoContent font{display: inline-flex;}
	.logoContent font img{width:30px;height:30px;margin: 0 7px 0px 7px;}
	.logoContent span{font-size: 16px; font-weight: 400;}
	.lastChild h8{padding: 2px;text-align: right;}
	#RocketDescription{margin: 0;width: 99%;overflow: hidden;font-weight: 400;line-height: 1.5; font-size: 16px;}
	.launcher-header p{
		margin: 5px 0 10px 0;
		line-height: 1;
		padding: 0;
		font-size: 16px;
		letter-spacing: -0.5px;
  		color: #000000;
	}
	.launcher-header p FONT{
		font-weight: 600;
	}
	.logoContent{font-size: 26px !important;}
	.headerBG{background-color: #EFF3F6;height: auto;overflow: hidden;}
	.hyper-content{font-size: 14px !important;color: #6e6e6e !important;padding:3px 0 !important;}
	.launcher-header li a{color: #5c00f7;font-size:14px;font-weight: 500;text-decoration:none;}
	select{border-radius: 3px;background-color:#fff !important;border: solid 0.5px #688093;font-size:14.5px;padding:5px 10px;font-weight: 600;min-width: 170px;height: 32px;margin: 2px 0px;
		background: url("dropdown.png") no-repeat right;
    -webkit-appearance: none;
    background-position-x: 96%;}
	.right-select{float:right;}
	#Rocket{margin-top: 5px;width: 100%;max-width:400px}
	.headerTable{font-size:14px;}
	.headerTable tr{font-size: 16px;font-weight: 400;}
	.heighlightBG{border-radius: 2px;background-color: #5c00f7;padding: 5px;color:#fff;font-size: 18px;}
	.highlightprice{padding: 0px 0 5px 0;text-align: right;}
	.borderTable{border:1px solid #eeeff1;width: 100%;}
	table{width: 100%;}
	.borderTable tr{font-size: 15px;font-weight: 400;}
	.borderTable td{padding:0px 10px;line-height: 1;}
	input[type=checkbox]{width: 20px;background-color: #fff;}
	input[type="text"]{border-radius: 1.5px;
    border: solid 0.5px #688093;margin: 2px 0;text-align: right;
    padding: 4px 8px 4px 8px;}
	.tableResultContent input[type="text"]{width:85px;}
	.tableResultContent .mobilelayout_r1{padding-right: 10px;}
	.inputstyle-1{width:150px;text-align: left;}
	.spacetitle{height: auto;overflow: hidden;background-color: #ffffff;padding: 5px 10px;border: 1px solid rgba(216, 216, 216, 0.25);}
	.spacetitle select{margin-left: 15px;}
	.padd2{padding:5px 10px}
	.spacetitle font, .padd2 font{font-weight: 600;}
	.spaceheder2cont font{font-size: 16px;font-weight: 400;}
	.topspace{margin-top: 30px;}
	.tdpadd1{padding: 0px 10px !important;}
	.tablecontent{padding: 30px 30px 40px 30px;height:100%;overflow:hidden;}
	.number-text1{padding: 4px 8px 4px 8px;margin-top: 5px;min-width: 80px;}
	.kgtext{padding-left: 5px;}
	.tableRocketContent{
		float: left;
		width: calc(55% - 15px);
		padding-bottom: 30px;
	}
	.tableResultContent{float: left;
    width: calc(45% - 15px);
	margin-left: 30px;}
	.right-content{float:right;border:none;padding: 6px 0 !important;}
	.right-content01{padding: 2px 0 !important;}
	.adwacedContent{width:100%;padding-bottom: 40px;}
	.engineText{float: left;width: calc(100% - 170px);padding-top: 8px;}
	.nopadd{padding-top: 0;}
	.spaceheder2cont, .leftTitle{float: left;}
	.layout_wt_content{text-align: right;float: right;}
	.layout_wt_content input{float: left;}
	.layout_wt_content span{display: inline-block;width: 20px;text-align:left;padding-left:5px;margin-top: 10px;}
	.layout_wt_content h8 span{margin-top: 0;}
	.adwacedContent button{margin:0 auto;display:block;font-size:16px;width: 170px;height: 40px;border-radius: 2px;border: solid 0.5px #b5bdcd;background-color: #fff;;}
	.mobilelayout_r2, .mobilelayout_r2 h8{text-align:right;width: 100%;}
	.mobilelayout_r1, .mobRight{text-align: right;}
	.mobRight select, .mobpadd select, .mobpadd input{margin-right: 25px;}
	.mobilelayout_r2 input[type="range"]{margin-top: 15px;width:calc(100% - 115px)}
	.mobileinner-r1 input{margin-left: 5px;}
	.rocketnewview{display: flex;float: right;}
	.rocketnewview input{width: 30px;min-width: 28px;}
	.rocketnewview .inputstyle-1, #Second_stage_engine_thrust{width: 60px;}
	.rocketnewview span{padding-top: 7px;padding-left: 5px;}
	.rocketnewview .kgtext{padding-right: 5px;}
	@media only screen and (max-width: 980px) {
		.tableRocketContent{float: none;width: 100%;max-width: 100%;}
		.tableResultContent{float: none;width: 100%;max-width: 100%;margin: 0;}
	.secondHeader{padding-right: 30px !important;}
		
	}
	@media only screen and (max-width: 768px) {
		.headerTitle, .lastChild{padding: 0;width: 100%;}
		.secondHeader{padding-bottom: 30px;padding-right: 0 !important;width: 100%;}

	}
	@media only screen and (max-width: 600px) {
		#RocketDescription{width: 100%;}
		.tablecontent{padding: 30px 15px 40px 5px;}
		.spacetitle{display: block;}
		.borderTable, .spacetitle, .borderTable td{border: none;}
		.secondHeader{padding-bottom: 30px;}
		.right-select{float:none;}
		.borderTable tr {display: inline-block;font-size: 14px; width:100%;border-bottom:0.5px solid #eeeff1}               
        .borderTable td { display: inline-block;line-height: 1.3;  width:calc(100%);padding: 0 5px;}
		.borderTable td[hidden=true]{display: none !important;}
		select{width:50%;margin: 10px 0;}
		input[type="text"]{width:50%;margin: 10px 0;}
		h8, h9 {padding: 6px 0;}
		.right-content{float:right;text-align: right;padding: 5px 0 10px 0 !important;}
		.dummy-node{display: none !important;}
		input[type=range]{margin-right: 20px;}
		.tableResultContent{margin:0;margin-top: 20px;}
		.spacetitle{display: grid;}
		.spacetitle select {margin: 15px 0 0 0;}
		select {font-size: 13px;background-size: 10px;}
		.mobLeft select{float: left;min-width: 49%;width: 49%;margin-bottom: 0;}
		.mobRight select{float: right;min-width: 49%;width: 49%;margin-bottom: 0;margin-top: -42px;}
		.engineText{padding-top:5px;line-height: 1;height: auto;width: 100%;}
		.mobilelayout_l1{width: 65%;float: left;padding-top: 4px;}
		.mobilelayout_r1{width: 30%;float: right;}
		.mobilelayout_r1 input{width: 82%;margin: 0;float: right;margin-top: -28px;}
		.mobilelayout_r1 select{width: 100%;min-width:80px;margin: 4px 0;float: right;margin-top: -15px;}
		.mobilelayout_r2{width: 30%;float: right;margin-top: -23px;}
		.mobilelayout_r2 h8{padding: 2px 10px;text-align: right !important;}
		.padd2, .spacetitle{padding: 5px;margin-bottom:5px;border-bottom:0.5px solid #eeeff1}
		.layout_wt_content{margin-top:-26px ;}
		.layout_wt_content input{float: left;margin: 0;width: calc(100% - 50px) !important;}
		.layout_wt_content span{float: left;padding-left: 5px;}
		.layout_wt_content h9 span {    margin-top: 0px;}
		.layout_wt_content h8, .layout_wt_content h9{display: flex;}
		.mobilelayout_l2{width: 50%;float: left;padding-top: 4px;}
		.mobilelayout_r2{width: 50%;float: right;display: inline-flex;margin: 0;}
		.mobilelayout_r2 input[type="range"]{width: 70px;margin: 0;float: left;margin-top: -28px;}
		.mobileinner-r1{margin-left: 8px;margin-top: -25px;}
		.mobRight select, .mobpadd select, .mobpadd input{margin-right: 0;}
		.rocketnewview span{padding-top: 10px;padding-left: 5px;}

	}
	@media only screen and (max-width: 480px) {	
		.launcher-header{padding:10px}
		.logoContent span{font-size: 14px;}
		.launcher-header p FONT{font-size: 21px;}
		.logoContent font img {width: 25px;margin: 0 3px 0px 3px;height: 25px;}
		.hyper-content{line-height: 1.5 !important;}
		.tdright{text-align: right;}
		.tdright h8{text-align: right;}
	}
	.mobilelayout_r2{padding:0px 0;}
	@media (-webkit-min-device-pixel-ratio: 2), 
(min-resolution: 192dpi) { 
	select{background: url("dropdown@2x.png") no-repeat right;}
}
@media only screen 
  and (min-device-width: 320px) 
  and (max-device-width: 480px)
  and (-webkit-min-device-pixel-ratio: 2) {
	select {background-position-x: 96%;background-size: 12px;}
}
	/* {border: 1px solid #eeeff1;
    border-collapse: separate;
    border-spacing: 0 1em;} */
    </STYLE>

<META name="GENERATOR" content="MSHTML 11.00.9600.17842"></HEAD> 
<BODY>
<DIV class="content">
	<div class="headerBG">
		<ul class="launcher-header">
			<li class="headerTitle">
				<P class="logoContent"><FONT>Launcher <img src="rocketlogo.png"> Calculator</FONT>
						<BR><span>An open source orbital launch vehicle payload calculator by </span><a href="https://launcherspace.com">Launcher</a><BR>
				<p class="hyper-content"><a href="#" onclick="openAbout()">Background and usage</a> |  <a href="#" onclick="openLicense()">MIT License</a
				> | <a href="https://github.com/LauncherSpace/Launcher-Calculator" target="_new">Github</a> | <a href="https://discord.gg/2rcRQTK" target="_new">Discord</a></p><center></p>
			</li>
			<li class="secondHeader">
				<FONT size="5" title="Choose a preset Rocket or create a New Project">Select Rocket</FONT></FONT><SELECT id="Rocket" title="Rocket name"></SELECT> 
	    <br><h6 id="RocketDescription"></h6>	
			</li>
			<li class="lastChild">
				<FONT size="5" title="Payload mass is the main calculation result">Result</FONT>
					  <id="Expand" title="Display more information"></SELECT>&emsp;&emsp;
				   
					  <TABLE class="headerTable" border="0">
						<TBODY>
							<TR>
								<TD title="Payload mass calculated by an approximate method.">Payload mass (calculated)</TD>
								<TD width="300" class="tdright"><h9 class="highlightprice"><b><span class="heighlightBG"><LABEL id="Payload_mass_calculated5"></LABEL> kg </span></TD></TR>
						<TR>
					  <TD title="The percentage ratio of payload mass to the initial rocket mass." width="600">Payload to Lift-off mass ratio</TD>
					  <TD width="120" class="tdright"><h8><LABEL id="Payload_to_Lift_off_mass_ratio"></LABEL> % </TD></TR>
						<TR class="Expanding">
					  <TD title="Payload mass calculated at first iteration">Payload mass (1)</TD>
					  <TD class="tdright"><h8><LABEL id="Payload_mass_calculated"></LABEL> kg</TD></TR>
						<TR class="ProjectingH">
					  <TD title="The percentage ratio of assumed payload mass to the calculated payload mass.">Payload change</TD>
					  <TD class="tdright"><h8><LABEL id="Payload_change"></LABEL> % </TD></TR></TBODY></TABLE>
			</li>
		</ul>

	</div>


<div class="tablecontent">	
	
<div class="tableRocketContent">
	<TABLE border="0">
		<TBODY>
		<TR>
		  <TD  valign="top">
			<TABLE border="0">
		  <TBODY>
		  <TR>
			<TD>									  		
			  <TABLE border="1" class="borderTable">
				<TBODY>
	  
				<TR class="Projecting">
				  <div class="spacetitle padd2">
					  <FONT size="5" title="Choose the Orbit you want to reach">Rocket</FONT>
				</div>
			  <TD width="460" title="Choose an engine for the first stage"><div class="engineText">1st&ensp;engine</div><SELECT class="right-select" id="Engine1" title="First stage engine name"> </TD>
			  <TD width="220"><div class="rocketnewview"><INPUT type="text" class="inputstyle-1" id="First_stage_engine_thrust" title="First stage engine thrust"><span class='kgtext'>kg</span><INPUT id="First_stage_engines_number" type="text" class="number-text1" title="Number of engines on the first stage"><span>Number</span></div></TD>
			</TR>
	  
				<TR>
			  <TD class="mobLeft" title="&#013;Changing the fuel or cycle in this menu only changes&#013;the maximum and minimum limits. To compare&#013;launchers with different fuels select 'Set averages'" width="460"><div class="engineText">1st&ensp;stage Fuel & Cycle &emsp;&emsp;</div><SELECT  class="right-select" id="Fuel"></SELECT></TD>
			  <TD class="mobRight" title="Changing the cycle in this menu only changes&#013;the maximum and minimum limits. To compare&#013;launchers with different cycles select 'Set averages'" width="220"><SELECT id="Cycle"></SELECT> </TD></TR>
	  
				<TR class="Projecting">
			  <TD width="460" title="Choose an engine for the second stage"><div class="engineText">2nd engine </div><SELECT class="right-select" id="Engine2" title="Second stage engine name"> </TD>
			  <TD width="220"><div class="rocketnewview"><INPUT id="Second_stage_engine_thrust" type="text" class="number-text1" title="Second stage engine thrust"><span class='kgtext'>kg</span><INPUT id="Second_stage_engines_number" type="text" class="number-text1" title="Number of engines on the second stage"><span>Number</span></div></TD></TR>
	  
				<TR>
			  <TD class="mobLeft" title="Second stage rocket engine fuel and cycle"><div class="engineText">2nd stage Fuel & Cycle &emsp;&emsp;&ensp; </div><SELECT class="right-select" id="Fuel2" title="Second stage engine fuel"></SELECT></TD>
			  <TD class="mobRight" title="Second stage rocket engine cycle"> <SELECT id="Cycle2"></SELECT> </TD></TR>
	  
				<TR class="f3stages">
			  <TD class="mobLeft" title="Third stage rocket engine fuel"><div class="engineText">3rd stage Fuel & Cycle &emsp;&emsp;&emsp;</div><SELECT class="right-select" id="Fuel3"></SELECT></TD>
			  <TD class="mobRight" title="Third stage rocket engine cycle"> <SELECT id="Cycle3"></SELECT> </TD></TR>
	  
				<TR>
			  <TD title="Having more stages increases efficiency - but also increases the complexity and the cost of the rocket"><div class="engineText mobilelayout_l1 nopadd">Stages</div></TD>
			  <TD class="mobpadd"><div class="mobilelayout_r1"><SELECT id="Stages" title="Number of stages"></SELECT> </div></TD></TR>
				<TR>
			  <TD title="Dimensionless ratio of engine thrust to weight of a rocket"><div class="mobilelayout_l1">Thrust-to-weight ratio</div></TD>
			  <TD class="mobpadd"><div class="mobilelayout_r1"><INPUT id="Thrust_to_weight_ratio"  class="inputstyle-1" type="text"></div></TD></TR>
				<TR>
			  <TD title="The initial mass of a rocket"><div class="mobilelayout_l1">Lift-off mass</div></TD>
			  <TD><div class="mobilelayout_r2"><h8><LABEL id="Lift_off_Mass"></LABEL> kg</div></TD></TR>
				<TR class="ProjectingH">
			  <TD title="The initial mass of a rocket excluding payload and fairing"><div class="mobilelayout_l1">Rocket mass (excluding Payload and Fairing)</div></TD>
			  <TD><div class="mobilelayout_r1 layout_wt_content"><INPUT id="Rocket_Mass"  class="inputstyle-1" type="text"><span>kg</span></div></TD></TR>
				<TR>
			  <TD title="The maximum diameter midsection of the rocket, which determines the aerodynamic drag.&#013;For modern rockets this is usually the fairing diameter."><div class="mobilelayout_l1">Max midsection diameter</div></TD>
			  <TD><div class="mobilelayout_r1 layout_wt_content"><INPUT class="inputstyle-1" type="text" id="Max_midsection_D"> <span>m</span></div></TD></TR>
	  
				<TR>
			  <TD title="The fairing is a nose cone used to protect a spacecraft against the&#013;aerodynamic influence during launch through an atmosphere.&#013;The fairing is usually separated after the vehicle has traversed&#013;the densest part of the atmosphere."><div class="mobilelayout_l1">Fairing mass</div></TD>
			  <TD><div class="mobilelayout_r1 layout_wt_content"><INPUT class="inputstyle-1" type="text" id="Fairing_mass"> <span>kg</span></div></TD></TR>
				<TR class="Expanding">
			  <TD title="A predetermined velocity, which corresponds to a flight altitude&#013;where the separation of the fairing is permissible.&#013;This method is used to simplify the calculations."><div class="mobilelayout_l1">Fairing jettison velocity</div></TD>
			  <TD><div class="mobilelayout_r1 layout_wt_content"><INPUT id="Fairing_jettison_velocity" class="inputstyle-1" type="text"> <span>m/s</span></div></TD></TR>
				<TR class="Expanding">
			  <TD title="Delta velocity required to achieve actual fairing separation velocity&#013;taking into account losses."><div class="mobilelayout_l1">Fairing jettison delta-v</div></TD>
			  <TD><div class="mobilelayout_r1 layout_wt_content"><h8><LABEL 
			  id="Fairing_jettison_delta_v"></LABEL> <span>m/s</span></h8></div></TD></TR>
				<TR class="Electric">
			  <TD title="Mass of the dropped batteries of the second stage to improve payload.&#013;It is estimated that it is 2/3 of the total battery mass."><div class="mobilelayout_l1">Jettisoned battery mass</div></TD>
			  <TD><div class="mobilelayout_r1 layout_wt_content"><INPUT id="Jettisoned_battery_mass" class="inputstyle-1" type="text"><span> kg</span></div></TD></TR>
				<TR class="ProjectingH">
			  <TD title="Estimated payload mass for the initial approximation at the beginning of the calculation"><div class="mobilelayout_l1">Assumed payload mass</div></TD>
			  <TD><div class="mobilelayout_r1 layout_wt_content"><INPUT id="Assumed_payload_mass" class="inputstyle-1" type="text"> <span>kg</span></div></TD></TR>
				<TR>
			  <TD title="The percentage ratio of the second and third stage mass to the rocket mass"><div class="mobilelayout_l1">2nd stage to Lift-off mass ratio</div></TD>
			  <TD><div class="mobilelayout_r1 layout_wt_content"><INPUT id="_2nd_Stage_mass_ratio" class="inputstyle-1" type="text"> <span>%</span></div></TD></TR>
	  
				<TR class="f3stages">
			  <TD title="The percentage ratio of the third stage mass to the rocket mass"><div class="mobilelayout_l1">Transfer Orbit stage to Lift-off mass ratio</div></TD>
			  <TD><div class="mobilelayout_r1 layout_wt_content"><INPUT id="_3rd_Stage_mass_ratio" class="inputstyle-1" type="text"><span> %</span></div></TD></TR>
				
	  
				<TR class="ProjectingH">
			  <TD class="dummy-node" align="center"> </TD>
			  <TD class="tdpadd1 right-content right-content01" title="Reasonable restrictions on the rocket characteristics"></SELECT>Limitations ON<INPUT id="Limitation" type="checkbox"></TD></TR>
		
				<TR>
			  <TD class="tdpadd1" title="Moving the sliders to the right increases efficiency but is more difficult to achieve" align="center">Payload decrease <-- --> Payload increase </TD>
			  <TD class="right-content" title="Using the averaged characteristics mode"></SELECT>Set averages<INPUT id="Set_averages" type="checkbox"></TD></TR>
				<TR>
	  
			  <TD title="The percentage ratio of the rocket's dry mass (vehicle plus contents)&#013;to its wet mass (vehicle plus contents plus propellant).&#013;Mass ratio is a measure of the efficiency of a rocket."><div class="mobilelayout_l2">1st&ensp;stage Dry to Wet mass ratio</div></TD>
			  <TD title="Easy to reach <-- --> Hard to reach"><div class="mobilelayout_r2 layout_wt_content"><INPUT class="slider" id="_1st_Dry_to_Wet_mass_ratio_Range" 
				type="range" min="1" max="100" value="50"><section class="mobileinner-r1">										    
	  <INPUT id="_1st_Dry_to_Wet_mass_ratio" type="text"> <span>%</span></section></div></TD></TR>
				<TR>
			  <TD title="The percentage ratio of the rocket's dry mass (vehicle plus contents)&#013;to its wet mass (vehicle plus contents plus propellant).&#013;Mass ratio is a measure of the efficiency of a rocket."><div class="mobilelayout_l2">2nd stage Dry to Wet mass ratio</div></TD>
			  <TD title="Easy to reach <-- --> Hard to reach"><div class="mobilelayout_r2 layout_wt_content"><INPUT class="slider" id="_2nd_Dry_to_Wet_mass_ratio_Range" 
				type="range" min="1" max="100" value="50"><section class="mobileinner-r1">										    
	  <INPUT type="text" id="_2nd_Dry_to_Wet_mass_ratio"> <span>%</span></section></div></TD></TR>
				<TR class="f3stages">
			  <TD title="The percentage ratio of the rocket's dry mass (vehicle plus contents)&#013;to its wet mass (vehicle plus contents plus propellant).&#013;Mass ratio is a measure of the efficiency of a rocket."><div class="mobilelayout_l2">Transfer Orbit stage Dry to Wet mass ratio</div></TD>
			  <TD title="Easy to reach <-- --> Hard to reach"><div class="mobilelayout_r2 layout_wt_content"><INPUT class="slider" id="_3rd_Dry_to_Wet_mass_ratio_Range" 
				type="range" min="1" max="100" value="50"><section class="mobileinner-r1">											    
	  <INPUT type="text" id="_3rd_Dry_to_Wet_mass_ratio"> <span>%</span></section></div></TD></TR>
				<TR>
			  <TD title="Any unused propellant trapped in the propulsion system&#013;(rocket engine, plumbing, and tanks) at thrust cutoff.&#013;It is a factor contributing significantly to the total dead weight&#013;of a vehicle and restricting its maximum performance"><div class="mobilelayout_l2">Unused propellant of 1st&ensp;stage</div></TD>
			  <TD title="Easy to reach <-- --> Hard to reach"><div class="mobilelayout_r2 layout_wt_content"><INPUT class="slider" id="Unused_propellant_of_1st_Stage_Range" 
				type="range" min="1" max="100" value="50"><section class="mobileinner-r1">										    
	  <INPUT type="text" id="Unused_propellant_of_1st_Stage"> <span>%</span></section></div></TD></TR>
				<TR>
			  <TD title="Any unused propellant trapped in the propulsion system&#013;(rocket engine, plumbing, and tanks) at thrust cutoff.&#013;It is a factor contributing significantly to the total dead weight&#013;of a vehicle and restricting its maximum performance"><div class="mobilelayout_l2">Unused propellant of 2nd stage</div></TD>
			  <TD title="Easy to reach <-- --> Hard to reach"><div class="mobilelayout_r2 layout_wt_content"><INPUT class="slider" id="Unused_propellant_of_2nd_Stage_Range" 
				type="range" min="1" max="100" value="50"><section class="mobileinner-r1">										    
	  <INPUT type="text" id="Unused_propellant_of_2nd_Stage"> <span>%</span></section></div></TD></TR>
				<TR class="f3stages">
			  <TD title="Any unused propellant trapped in the propulsion system&#013;(rocket engine, plumbing, and tanks) at thrust cutoff.&#013;It is a factor contributing significantly to the total dead weight&#013;of a vehicle and restricting its maximum performance"><div class="mobilelayout_l2">Unused propellant of Transfer Orbit stage</div></TD>
			  <TD title="Easy to reach <-- --> Hard to reach"><div class="mobilelayout_r2 layout_wt_content"><INPUT class="slider" id="Unused_propellant_of_Transfer_Orbit_Stage_Range" 
				type="range" min="1" max="100" value="50"><section class="mobileinner-r1">								    
	  <INPUT type="text" id="Unused_propellant_of_Transfer_Orbit_Stage"> <span>%</span></section></div></TD></TR>
				<TR>
			  <TD title="The generated thrust divided by the propellant mass flow rate,&#013; resulting in units of time (seconds). Specific impulse is&#013;a measure of how effectively a jet engine uses fuel.&#013;At sea level, the thrust of a rocket engine is reduced due to&#013;the influence of atmospheric pressure."><div class="mobilelayout_l2">1st&ensp;stage Isp sea level or at the start altitude</div></TD>
			  <TD title="Easy to reach <-- --> Hard to reach"><div class="mobilelayout_r2 layout_wt_content"><INPUT class="slider" id="First_stage_isp_sea_level_Range" 
				type="range" min="1" max="100" value="50"><section class="mobileinner-r1">									    
	  <INPUT type="text" id="First_stage_isp_sea_level"> <span>s</span></section></div></TD></TR>
				<TR>
			  <TD title="The generated thrust divided by the propellant mass flow rate,&#013; resulting in units of time (seconds). Specific impulse is&#013;a measure of how effectively a jet engine uses fuel."><div class="mobilelayout_l2">1st&ensp;stage Isp vacuum</div></TD>
			  <TD title="Easy to reach <-- --> Hard to reach"><div class="mobilelayout_r2 layout_wt_content"><INPUT class="slider" id="First_stage_isp_vac_Range" type="range" 
				min="1" max="100" value="50"><section class="mobileinner-r1">			
	  <INPUT type="text" id="First_stage_isp_vac"> <span>s</span></section></div></TD></TR>
				<TR>
			  <TD title="The generated thrust divided by the propellant mass flow rate,&#013; resulting in units of time (seconds). Specific impulse is&#013;a measure of how effectively a jet engine uses fuel.&#013;The specific impulse of the upper stage engines is usually higher,&#013;since due to the absence of amospheric pressure a higher&#013;expansion ratio can be achieved (longer nozzle)."><div class="mobilelayout_l2">2nd stage Isp</div></TD>
			  <TD title="Easy to reach <-- --> Hard to reach"><div class="mobilelayout_r2 layout_wt_content"><INPUT class="slider" id="Second_stage_isp_vac_Range" 
				type="range" min="1" max="100" value="50"><section class="mobileinner-r1">									    
	  <INPUT type="text" id="Second_stage_isp_vac"> <span>s</span></section></div></TD></TR>
				<TR class="f3stages">
			  <TD title="The generated thrust divided by the propellant mass flow rate,&#013; resulting in units of time (seconds). Specific impulse is&#013;a measure of how effectively a jet engine uses fuel."><div class="mobilelayout_l2">Transfer Orbit stage Isp</div></TD>
			  <TD title="Easy to reach <-- --> Hard to reach"><div class="mobilelayout_r2 layout_wt_content"><INPUT class="slider" id="Transfer_Orbit_Stage_isp_Range" 
				type="range" min="1" max="100" value="50"><section class="mobileinner-r1">						    
	  <INPUT type="text" id="Transfer_Orbit_Stage_isp"> <span>s</span></section></div></TD></TR>
				<TR class="ProjectingH">
			  <TD title="Percentage change in the specific impulse of engines of all stages&#013;to demonstrate its effect on the rocket performance."><div class="mobilelayout_l2">Specific Impulse variation</div></TD>
			  <TD><div class="mobilelayout_r2 layout_wt_content"><INPUT class="slider" id="Specific_Impulse_Variation_Range" 
				type="range" min="90" max="110" value="100"><section class="mobileinner-r1">											    
	  <INPUT type="text" id="Specific_Impulse_Variation"> <span>%</span></section></div></TD></TR></TBODY></TABLE></TD></TR>
	  
		  </TBODY></TABLE></TD>
		  
		  </TR></TBODY></TABLE>
</div>
<div class="tableResultContent">
	<TABLE border="0">
		<TBODY>
			<TR>
				<TD valign="top">
					<TABLE border="0">
				  <TBODY>
				  <TR>
					<TD>
					<div class="spacetitle"><FONT class="leftTitle" size=5" title="Choose the Launch point">Spaceport</FONT><div class="spaceheder2cont"> <SELECT title="Spaceport name"
					  id="StartingPoint"></SELECT>&ensp;<id="Air Launch" title="Launch of an existing rocket from an airplane"><font size="2">Air Launch</font><INPUT id="Air_Launch" type="checkbox"></div>
					  </div>
					  <TABLE border="1" class="borderTable">
						<TBODY title="">
						<TR>
					  <TD title="Spaceport or (in case air launch) airplane altitude above sea level" width="460"><div class="mobilelayout_l1">Launch point Altitude</div></TD>
					  <TD width="220"><div class="mobilelayout_r1 layout_wt_content"><INPUT type="text" id="Starting_point_Altitude"> <span>km</span></div></TD></TR>
						<TR>
					  <TD  title="Speed added to rocket speed when starting from an airplane."><div class="mobilelayout_l1">Additional velocity (Air Launch)</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><INPUT type="text" id="Additional_Speed"><span> m/s</span></div></TD></TR>
						<TR>
					  <TD title="An angle which ranges from 0 deg at the Equator to 90 deg (North or South)"><div class="mobilelayout_l1">Spaceport Latitude</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><INPUT type="text" id="Spaceport_latitude"> <span>deg</span></div></TD></TR>
						<TR class="Expanding">
					  <TD title="An approximate azimuth calculated by spherical trigonometry."><div class="mobilelayout_l1">Auxiliary angle</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h8><LABEL id="Intermediate_angle"></LABEL> <span>deg</span></h8></div></TD></TR>
						<TR>
					  <TD title="The angle between the north direction and the projection&#013;of the initial orbital plane onto the launch location."><div class="mobilelayout_l1">Launch Azimuth</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h8><LABEL id="Launch_azimuth"></LABEL> <span>deg</span></h8></div></</TD></TR>
						<TR>
					  <TD title="The speed of the Earth surface due to the Earth's rotation&#013;at the latitude of the Spaceport."><div class="mobilelayout_l1">Earth rotation velocity</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h8><LABEL id="Launch_point_speed"></LABEL> <span>m/s</span></h8></div></TD></TR>
						<TR class="Expanding">
					  <TD title="The imaginary satellite velocity at the starting point altitude, which is necessary&#013;for calculating the HohmannTransfer to Low Earth Orbit."><div class="mobilelayout_l1">Launch point altitude orb. velocity (imaginary)</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h8><LABEL 
						id="Starting_point_Altitude_orbital_velocity"></LABEL> <span>m/s</span></h8></div></TD></TR>
						<TR class="Expanding">
					  <TD title="The absolute orbital speed of the satellite"><div class="mobilelayout_l1">Absolute orbital velocity</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h8><LABEL id="Absolute_orbital_velocity"></LABEL> <span>m/s</span></h8></div></TD></TR>
						<TR class="Expanding">
					  <TD title="The orbital speed of the satellite relative to the Earth surface."><div class="mobilelayout_l1">Relative orbital velocity</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h8><LABEL id="Orbital_velocity"></LABEL><span> m/s</span></h8></div></TD></TR>
						<TR class="Expanding">
					  <TD title="Increment of speed depending on the direction of launch relative to&#013;the direction of Earth's rotation."><div class="mobilelayout_l1">Orbital velocity gain due to the Earth rotation</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h8><LABEL id="Orbital_velocity_increment_due_to_the_Earth_rotation"></LABEL><span> m/s</span></h8></div></TD></TR>
						<TR class="Expanding">
					  <TD title="Auxiliary delta-v for orbital maneuver calculation."><div class="mobilelayout_l1">Delta-v for circular orbit (ideal)</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h8><LABEL 
						id="Vsp_for_circular_orbit"></LABEL> <span>m/s</span></h8></div></TD></TR>
						<TR class="Expanding">
					  <TD title="Auxiliary delta-v for losses calculation."><div class="mobilelayout_l1">Delta-v for LEO (losses calc.)</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h8><LABEL 
						id="Vsp_for_LEO"></LABEL> <span>m/s</span></h8></div></TD></TR></TBODY></TABLE></TR>
				  <TR >
					<TD>
						<div class="spacetitle topspace">
							<FONT class="leftTitle" size="5" title="Choose the Orbit you want to reach">Orbit</FONT><div class="spaceheder2cont"> <SELECT id="Orbit" title="Orbit or Planet to reach"></SELECT>	 
						  <FONT size="2"><LABEL id="OrbitDescription"></LABEL></div></FONT>
					  </div>
					  <TABLE border="1" class="borderTable">
						<TBODY>
						<TR>
					  <TD title="The point of the orbit closest to Earth" width="460"><div class="mobilelayout_l1"><LABEL id="Reference"></LABEL> Orbit Perigee</div></TD>
					  <TD width="220"><div class="mobilelayout_r1 layout_wt_content"><INPUT type="text" id="Orbit_Perigee"> <span>km</span></div></TD></TR>
						<TR>
					  <TD title="The point of the orbit farthest from Earth"><div class="mobilelayout_l1">Orbit Apogee (0 means a circular orbit)</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><INPUT type="text" id="Orbit_Apogee"> <span>km</span></div></TD></TR>
						<TR class="fGEOI">
					  <TD title="The angle between the Earth's equatorial plane and the satellite's orbital plane.&#013;The inclination of an orbit is always greater than the spaceport latitude."><div class="mobilelayout_l1">Orbit Inclination</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><INPUT type="text" id="Orbit_Inclination"><span> deg</span></div></TD></TR>
						<TR class="Expanding">
					  <TD title="Orbital speed at perigee (maximum)"><div class="mobilelayout_l1">Perigee velocity</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h8><LABEL id="Perigee_velocity"></LABEL> <span>m/s</span></h8></div></TD></TR>
						<TR class="Expanding">
					  <TD title="Orbital speed at apogee (minimum)"><div class="mobilelayout_l1">Apogee velocity</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h8><LABEL id="Apogee_velocity"></LABEL><span> m/s</span></h8></div></TD></TR>
					   <TR>
					  <TD title="The time a given satellite takes to complete one orbit around Earth"><div class="mobilelayout_l1">Orbital Period</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h8><LABEL id="Orbital_period"></LABEL><span> min</span></h8></div></TD></TR>
						<TR class="fGEO">
					  <TD title="Velocity increment needed to achieve zero inclination within a Geosynchronous orbit&#013;if the inclination of the Geosynchronous Transfer Orbit is not a zero.&#013;Usually this velocity increment is added at the apogee of the Geosynchronous Transfer Orbit."><div class="mobilelayout_l1">Delta-v for change orbit inclination to 0</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h8><LABEL 
					  id="Vsp_for_inclination_change"></LABEL> <span>m/s</span></h8></div></TD></TR>
						<TR class="Expanding">
					  <TD title="Delta velocity needed for injection into target orbit without&#013;taking into account the effect of the Earth's rotation."><div class="mobilelayout_l1">Orbital (injection) velocity</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h8><LABEL id="Injection_velocity"></LABEL><span> m/s</span></h8></div></TD></TR>
						<TR>
					  <TD title="Delta-v, as used in spacecraft flight dynamics, is a measure of the impulse per unit of &#013;spacecraft mass that is needed to perform a maneuver, such as launching from or landing&#013;on a planet or moon, or an in-space orbital maneuver. It is a scalar that has the units of speed.&#013;As used in this context, it is not the same as the physical change in velocity of the vehicle.&#013;The required delta-v to achieve a given orbit in this software is calculated according to the&#013;Hohmann Transfer formula for the energy-optimal two burn maneuver which provides &#013;very good accuracy. However, these formulas do not take into account the losses associated&#013;with the Earth&#039;s gravity and atmosphere."><div class="mobilelayout_l1">Delta-v for target orbit (ideal)</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h8><LABEL 
					  id="Vsp_for_target_orbit"></LABEL><span> m/s</span></h8></div></TD></TR>
						<TR>
					  <TD title="Delta velocity for injection to trans-planet orbit from a 200km reference orbit"><div class="mobilelayout_l1">Extra velocity for flight to the planets</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><INPUT type="text" id="Extra_speed_for_flight_to_the_planets"> <span>m/s</span></div></TD></TR></TBODY></TABLE></TD></TR >
				  <TR>
					<TD><div class="spacetitle topspace padd2">
						<FONT size="5" title="Empirically determined delta-v losses for injection into LEO">Losses<BR></FONT>
					</div>
					  <TABLE border="1" class="borderTable">
						<TBODY>
						<TR class="Expanding">
					  <TD title="An estimate of gravitational losses during the vertical phase of a flight&#013;which is used to determine the total gravitational losses."><div class="mobilelayout_l1">Gravity Losses at specific altitude</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h8><LABEL id="Gravity_losses_at_specific_altitude"></LABEL><span> m/s</span></h8></div></TD></TR>
						<TR>
					  <TD title="A measure of the loss in the net performance of a rocket&#013;while it is thrusting in a gravitational field"><div class="mobilelayout_l1">Gravity Losses</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h8><LABEL id="Gravity_losses"></LABEL> <span>m/s</span></h8></div></TD></TR>
						<TR>
					  <TD title="A measure of the loss in the net performance of a rocket due to the&#013;aerodynamic forces which are applied on both the body and the fins" width="460"><div class="mobilelayout_l1">Aerodynamic Losses</div></TD>
					  <TD width="220"><div class="mobilelayout_r1 layout_wt_content"><h8><LABEL 
						id="Aerodynamic_losses"></LABEL><span> m/s</span></h8></div></TD></TR>
						<TR class="Expanding">
					  <TD title="Total losses including gravity, aerodynamic and control losses"><div class="mobilelayout_l1">Summary Losses</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h8><LABEL id="Summary_losses"></LABEL> <span>m/s</span></h8></div></TD></TR>
						<TR>
					  <TD title="The percentage ratio of total losses to the delta velocity for Low Earth Orbit."><div class="mobilelayout_l1">Assumed Losses</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h8><LABEL id="Assumed_losses"></LABEL> <span>%&ensp;</span></h8></div></TD></TR>
						<TR>
					  <TD title="Delta-v needed to achieve a required calculated according to the Hohmann Transfer&#013;formula plus losses calculated according to the Y. Lobanovsky approximation method.&#013;This speed would have a rocket in the absence of external forces. However, the actual&#013;speed due to losses will be significantly lower."><div class="mobilelayout_l1">Delta-v with Losses</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h8><LABEL 
						id="Vsp_with_losses"></LABEL> <span>m/s</span></h8></div></TD></TR></TBODY></TABLE></TD></TR>
				  <TR>
					<TD><div class="spacetitle topspace padd2"><FONT size="" title="The main characteristics of the Rocket">Output<BR></FONT></div> 
					  <TABLE border="1" class="borderTable">
						<TBODY>
						<TR class="Expanding">
					  <TD title="The integral specific impulse of the engines of the first stage.&#013;This way back pressure losses are taken into account."><div class="mobilelayout_l1">1st&ensp;stage average trajectory Isp</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h9><LABEL id="First_stage_average_trajectory_isp"></LABEL> <span>s</span></h9></div></TD></TR>
						<TR>
					  <TD class="tdpadd1" title="The increment of the rocket velocity due to the thrust of the first stage engines&#013;in the ideal case (the absence of external forces) calculated by the Tsiolkovsky formula." width="460"><div class="mobilelayout_l1">1st&ensp;stage delta-v</div></TD>
					  <TD width="220"><div class="mobilelayout_r1 layout_wt_content"><h9><LABEL id="First_stage_delta_v"></LABEL> <span>m/s</span></h9></div></TD></TR>
						<TR class="Expanding">
					  <TD class="tdpadd1" title="The total mass of the rocket at the shutdown of the first stage engines."><div class="mobilelayout_l1">1st&ensp;stage final mass</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h9><LABEL id="First_stage_final_mass"></LABEL><span> kg</span></h9></div></TD></TR>
						<TR class="Expanding">
					  <TD title="The total mass of the oxidizer and fuel of the first stage"><div class="mobilelayout_l1">1st&ensp;stage propellant mass</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><INPUT type="text" id="First_stage_propellant_mass"> <span>kg</span></div></TD></TR>
						<TR class="Expanding">
					  <TD title="The mass of the vehicle first stage plus contents."><div class="mobilelayout_l1">1st&ensp;stage dry mass</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><INPUT type="text" id="First_stage_dry_mass"><span> kg</span></div></TD></TR>
						<TR class="Expanding">
					  <TD title="Approximate engines run time&#013;This is usually less than the real time&#013;because it does not take into account&#013;the real thrust profile."><div class="mobilelayout_l1">1st&ensp;stage engines run time</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h9><LABEL id="First_stage_run_time"></LABEL> <span>s </span></h9></div></TD></TR>
			  
						<TR>
					  <TD class="tdpadd1" title="The increment of the rocket velocity due to the thrust of the second stage engines&#013;in the ideal case (the absence of external forces) calculated by the Tsiolkovsky formula."><div class="mobilelayout_l1">2nd stage delta-v <LABEL id="Required"></LABEL></div> </TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h9><LABEL id="Second_stage_delta_v"></LABEL> <span>m/s</span></h9></div></TD></TR>
						<TR class="Expanding">
					  <TD title="The total mass of the rocket at the start of the second stage engines."><div class="mobilelayout_l1">2nd stage total (start) mass</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h9><LABEL id="Second_stage_total_Start_mass"></LABEL> <span>kg</span></h9></div></TD></TR>
						<TR class="Expanding">
					  <TD><div class="mobilelayout_l1">2nd stage total mass before fairing jettison</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h9><LABEL id="Second_stage_total_mass_before_fairing_jettison"></LABEL> <span>kg</span></h9></div></TD></TR>
						<TR class="ExpandingB">
					  <TD><div class="mobilelayout_l1">2nd stage total mass before battery jettison</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h9><LABEL id="Second_stage_total_mass_before_battery_jettison"></LABEL> <span>kg</span></h9></div></TD></TR>
						<TR class="ExpandingB">
					  <TD><div class="mobilelayout_l1">2nd stage delta-v before batt. jettison</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h9><LABEL id="Second_stage_delta_v_before_battery_jettison"></LABEL> <span>m/s</span></h9></div></TD></TR>
						<TR class="Expanding">
					  <TD class="tdpadd1" title="The total mass of the rocket at the shutdown of the second stage engines."><div class="mobilelayout_l1">2nd stage final mass</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h9><LABEL id="Second_stage_final_mass"></LABEL><span> kg</span></h9></div></TD></TR>
						<TR class="Expanding">
					  <TD title="The total mass of the oxidizer and fuel of the second stage"><div class="mobilelayout_l1">2nd stage propellant mass</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><INPUT type="text" id="Second_stage_propellant_mass"><span> kg</span></div></TD></TR>
						<TR class="Expanding">
					  <TD title="The mass of the second stage plus contents."><div class="mobilelayout_l1">2nd stage dry mass</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><INPUT type="text" id="Second_stage_dry_mass"> <span>kg</span></div></TD></TR>
						<TR class="Expanding">
					  <TD title="Approximate engine run time"><div class="mobilelayout_l1">2nd&ensp;stage engine run time</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h9><LABEL id="Second_stage_run_time"></LABEL> <span>s </span></h9></div></TD></TR>
			  
						<TR class="f3stages">
					  <TD class="tdpadd1" title="The increment of the rocket velocity due to the thrust of the third stage engines&#013;in the ideal case (the absence of external forces) calculated by the Tsiolkovsky formula."><div class="mobilelayout_l1">Transfer Orbit stage delta-v (required)</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h9><LABEL id="Transfer_Orbit_stage_delta_v_required"></LABEL><span> m/s</span></h9></div></TD></TR>
						<TR class="Expanding3">
					  <TD class="tdpadd1" title="The total mass of the rocket at the start of the third stage engines."><div class="mobilelayout_l1">Transfer Orbit stage total (start) mass</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h9><LABEL 
						id="Transfer_Orbit_stage_total_Start_mass"></LABEL> <span>kg</span></h9></div></TD></TR>
						<TR class="Expanding3">
					  <TD class="tdpadd1" title="The total mass of the rocket at the shutdown of the third stage engines."><div class="mobilelayout_l1">Transfer Orbit stage final mass</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h9><LABEL 
						id="Transfer_Orbit_stage_final_mass"></LABEL><span> kg</span></h9></div></TD></TR>
						<TR class="Expanding3">
					  <TD title="The total mass of the oxidizer and fuel of the third stage"><div class="mobilelayout_l1">Transfer Orbit stage propellant mass</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><INPUT type="text" id="Transfer_Orbit_stage_propellant_mass"><span> kg</span></div></TD></TR>
						<TR class="Expanding3">
					  <TD title="The mass of the third stage plus contents."><div class="mobilelayout_l1">Transfer Orbit stage dry mass</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><INPUT type="text" id="Transfer_Orbit_stage_dry_mass"><span> kg</span></div></TD></TR>
			  
						<TR>
					  <TD class="tdpadd1" title="The procedure error - it should not be equated with actual accuracy of the result."><div class="mobilelayout_l1">Calculation Error</div></TD>
					  <TD><div class="mobilelayout_r1 layout_wt_content"><h9><LABEL id="Calculation_Error"></LABEL><span> m/s</span></h9></div></TD></TR>
						  </TBODY></TABLE>
						  </TD>
						  </TR></TBODY></TABLE></TD>
			</TR>
		</TBODY>
	</TABLE>

</div>
</div>

<div class="adwacedContent">
	<button isBool=0 id="Expand">Advanced...</button>
	<!-- <font size="2">Expand</font><INPUT id="Expand" type="checkbox"> -->
</div>

			<div id="myModal" class="modal">

				<!-- Modal content -->
				<div class="modal-content">
					<section class="model-header">
						<h5 id="modelTitle"></h5>
						<span onclick="closeModel()" class="close">&times;</span>
					</section>
				  <div id="modelContentGroup">
					  <section id="popupContent">
						Content is Loading...
					  </section>
					</div>
				</div>
			  
			  </div>
<SCRIPT>
	var elStartingPoint = document.querySelector('#StartingPoint');
	var elAir_Launch = document.querySelector('#Air_Launch');
	var elStarting_point_Altitude = document.querySelector('#Starting_point_Altitude');
	var elAdditional_Speed = document.querySelector('#Additional_Speed');
	var elOrbit_Perigee = document.querySelector('#Orbit_Perigee');
	var elOrbit_Apogee = document.querySelector('#Orbit_Apogee');
	var elSpaceport_latitude = document.querySelector('#Spaceport_latitude');
	var elOrbit_Inclination = document.querySelector('#Orbit_Inclination');

	var elIntermediate_angle = document.querySelector('#Intermediate_angle');
	var elLaunch_azimuth = document.querySelector('#Launch_azimuth');
	var elLaunch_point_speed = document.querySelector('#Launch_point_speed');
	var elStarting_point_Altitude_orbital_velocity = document.querySelector('#Starting_point_Altitude_orbital_velocity');
	var elAbsolute_orbital_velocity = document.querySelector('#Absolute_orbital_velocity');
	var elOrbital_period = document.querySelector('#Orbital_period');

	var elApogee_velocity = document.querySelector('#Apogee_velocity');
	var elPerigee_velocity = document.querySelector('#Perigee_velocity');
	var elVsp_for_inclination_change = document.querySelector('#Vsp_for_inclination_change');

	var elOrbital_velocity = document.querySelector('#Orbital_velocity');
	var elOrbital_velocity_increment_due_to_the_Earth_rotation = document.querySelector('#Orbital_velocity_increment_due_to_the_Earth_rotation');
	var elVsp_for_circular_orbit = document.querySelector('#Vsp_for_circular_orbit');
	var elInjection_velocity = document.querySelector('#Injection_velocity');
	var elVsp_for_target_orbit = document.querySelector('#Vsp_for_target_orbit');
	var elVsp_for_LEO = document.querySelector('#Vsp_for_LEO');

	var elOrbit = document.querySelector('#Orbit');

	//=== ROCKET ===
	var elRocket = document.querySelector('#Rocket');
	var elRocketDescription = document.querySelector('#RocketDescription');
	var elOrbitDescription = document.querySelector('#OrbitDescription');
	var elThrust_to_weight_ratio = document.querySelector('#Thrust_to_weight_ratio');
	
	var elRocket_Mass = document.querySelector('#Rocket_Mass');
	var elLift_off_Mass = document.querySelector('#Lift_off_Mass');
	var elMax_midsection_D = document.querySelector('#Max_midsection_D');
	var elFairing_mass = document.querySelector('#Fairing_mass');
	var elFairing_jettison_velocity = document.querySelector('#Fairing_jettison_velocity');
	var elFairing_jettison_delta_v = document.querySelector('#Fairing_jettison_delta_v');
	var elJettisoned_battery_mass = document.querySelector('#Jettisoned_battery_mass');
	
	var elAssumed_payload_mass = document.querySelector('#Assumed_payload_mass');
	var elPayload_to_Lift_off_mass_ratio = document.querySelector('#Payload_to_Lift_off_mass_ratio');
	var el2nd_Stage_mass_ratio = document.querySelector('#_2nd_Stage_mass_ratio');
	var el3rd_Stage_mass_ratio = document.querySelector('#_3rd_Stage_mass_ratio');
	var el1st_Dry_to_Wet_mass_ratio_Range = document.querySelector('#_1st_Dry_to_Wet_mass_ratio_Range');
	var el1st_Dry_to_Wet_mass_ratio = document.querySelector('#_1st_Dry_to_Wet_mass_ratio');
	var el2nd_Dry_to_Wet_mass_ratio_Range = document.querySelector('#_2nd_Dry_to_Wet_mass_ratio_Range');
	var el2nd_Dry_to_Wet_mass_ratio = document.querySelector('#_2nd_Dry_to_Wet_mass_ratio');
	var el3rd_Dry_to_Wet_mass_ratio_Range = document.querySelector('#_3rd_Dry_to_Wet_mass_ratio_Range');
	var el3rd_Dry_to_Wet_mass_ratio = document.querySelector('#_3rd_Dry_to_Wet_mass_ratio');
	var elUnused_propellant_of_1st_Stage_Range = document.querySelector('#Unused_propellant_of_1st_Stage_Range');
	var elUnused_propellant_of_1st_Stage = document.querySelector('#Unused_propellant_of_1st_Stage');
	var elUnused_propellant_of_2nd_Stage_Range = document.querySelector('#Unused_propellant_of_2nd_Stage_Range');
	var elUnused_propellant_of_2nd_Stage = document.querySelector('#Unused_propellant_of_2nd_Stage');
	var elUnused_propellant_of_Transfer_Orbit_Stage_Range = document.querySelector('#Unused_propellant_of_Transfer_Orbit_Stage_Range');
	var elUnused_propellant_of_Transfer_Orbit_Stage = document.querySelector('#Unused_propellant_of_Transfer_Orbit_Stage');

	var elFirst_stage_engine_thrust = document.querySelector('#First_stage_engine_thrust');
	var elFirst_stage_engines_number = document.querySelector('#First_stage_engines_number');
	var elFirst_stage_isp_sea_level_Range = document.querySelector('#First_stage_isp_sea_level_Range');
	var elFirst_stage_isp_sea_level = document.querySelector('#First_stage_isp_sea_level');
	var elFirst_stage_isp_vac_Range = document.querySelector('#First_stage_isp_vac_Range');
	var elFirst_stage_isp_vac = document.querySelector('#First_stage_isp_vac');
	var elSecond_stage_engine_thrust = document.querySelector('#Second_stage_engine_thrust');
	var elSecond_stage_engines_number = document.querySelector('#Second_stage_engines_number');
	var elSecond_stage_isp_vac_Range= document.querySelector('#Second_stage_isp_vac_Range');
	var elSecond_stage_isp_vac = document.querySelector('#Second_stage_isp_vac');
	var elTransfer_Orbit_Stage_isp_Range = document.querySelector('#Transfer_Orbit_Stage_isp_Range');
	var elTransfer_Orbit_Stage_isp = document.querySelector('#Transfer_Orbit_Stage_isp');
	var elSpecific_Impulse_Variation_Range = document.querySelector('#Specific_Impulse_Variation_Range');
	var elSpecific_Impulse_Variation = document.querySelector('#Specific_Impulse_Variation');

	var elExtra_speed_for_flight_to_the_planets = document.querySelector('#Extra_speed_for_flight_to_the_planets');

	var elEngine1 = document.querySelector('#Engine1');
	var elEngine2 = document.querySelector('#Engine2');

	var elCycle = document.querySelector('#Cycle');
	var elCycle2 = document.querySelector('#Cycle2');
	var elCycle3 = document.querySelector('#Cycle3');
	var elFuel = document.querySelector('#Fuel');
	var elFuel2 = document.querySelector('#Fuel2');
	var elFuel3 = document.querySelector('#Fuel3');
	var elStages = document.querySelector('#Stages');
	
	//=== Losses ===
	var elGravity_losses_at_specific_altitude = document.querySelector('#Gravity_losses_at_specific_altitude');
	var elGravity_losses = document.querySelector('#Gravity_losses');
	var elAerodynamic_losses = document.querySelector('#Aerodynamic_losses');
	var elSummary_losses = document.querySelector('#Summary_losses');
	var elAssumed_losses = document.querySelector('#Assumed_losses');
	var elVsp_with_losses = document.querySelector('#Vsp_with_losses');
	
	//=== Output ===

	var elFirst_stage_average_trajectory_isp = document.querySelector('#First_stage_average_trajectory_isp');
	var elFirst_stage_delta_v = document.querySelector('#First_stage_delta_v');
	var elFirst_stage_final_mass = document.querySelector('#First_stage_final_mass');
	var elFirst_stage_propellant_mass = document.querySelector('#First_stage_propellant_mass');
	var elFirst_stage_dry_mass = document.querySelector('#First_stage_dry_mass');
	var elFirst_stage_run_time = document.querySelector('#First_stage_run_time');

	var elSecond_stage_delta_v = document.querySelector('#Second_stage_delta_v');
	var elSecond_stage_total_Start_mass = document.querySelector('#Second_stage_total_Start_mass');
	var elSecond_stage_total_mass_before_fairing_jettison = document.querySelector('#Second_stage_total_mass_before_fairing_jettison');
	var elSecond_stage_total_mass_before_battery_jettison = document.querySelector('#Second_stage_total_mass_before_battery_jettison');
	var elSecond_stage_delta_v_before_battery_jettison = document.querySelector('#Second_stage_delta_v_before_battery_jettison');
	
	var elSecond_stage_final_mass = document.querySelector('#Second_stage_final_mass');
	var elSecond_stage_propellant_mass = document.querySelector('#Second_stage_propellant_mass');
	var elSecond_stage_dry_mass = document.querySelector('#Second_stage_dry_mass');
	var elSecond_stage_run_time = document.querySelector('#Second_stage_run_time');
	
	var elTransfer_Orbit_stage_delta_v_required = document.querySelector('#Transfer_Orbit_stage_delta_v_required');
	var elTransfer_Orbit_stage_total_Start_mass = document.querySelector('#Transfer_Orbit_stage_total_Start_mass');
	var elTransfer_Orbit_stage_final_mass = document.querySelector('#Transfer_Orbit_stage_final_mass');
	var elTransfer_Orbit_stage_propellant_mass = document.querySelector('#Transfer_Orbit_stage_propellant_mass');
	var elTransfer_Orbit_stage_dry_mass = document.querySelector('#Transfer_Orbit_stage_dry_mass');
	var elCalculation_Error = document.querySelector('#Calculation_Error');

	var elPayload_mass_calculated  = document.querySelector('#Payload_mass_calculated');
	var elPayload_mass_calculated5 = document.querySelector('#Payload_mass_calculated5');
	var elPayload_change = document.querySelector('#Payload_change');
	var elExpand = document.querySelector('#Expand');
	var elsExpanding = document.querySelectorAll('.content tr[class="Expanding"]');
	var elsExpandingB = document.querySelectorAll('.content tr[class="ExpandingB"]');
	var elsExpanding3 = document.querySelectorAll('.content tr[class="Expanding3"]');
	var els3stages = document.querySelectorAll('.content tr[class="f3stages"]');
	var elsElectric = document.querySelectorAll('.content tr[class="Electric"]');
	var elsGEO = document.querySelectorAll('.content tr[class="fGEO"]');
	var elsGEOI = document.querySelectorAll('.content tr[class="fGEOI"]');
	var elLimitation = document.querySelector('#Limitation');
	var elSet_averages = document.querySelector('#Set_averages');
	var elProjecting = document.querySelectorAll('.content tr[class="Projecting"]');
	var elProjectingH = document.querySelectorAll('.content tr[class="ProjectingH"]');

	var elReference = document.querySelector('#Reference');
	var elRequired = document.querySelector('#Required');
	var Thrust_To_Weight_2st = 1.0;	
	var Absolute_Mass = 0;
	var Irremovable_Gravity_Losses;
	var Vsp_for_target_orbit;
	var Payload_mass;

	window.onload = onPageLoad;
	window.onunload = onPageUnload;
	
	var s_start_point_count = 17;
	var s_start_point_data = [["Cape Canaveral",	28.5,  -80.33,  0.1,  28.5, "USA East Coast"],
				  ["Vandenberg",   	34.72, -120.62,0.11,  34.72,"USA West Coast (basically polar orbit)"],
				  ["Wallops",   	34.94, -75.47,    0,  34.94,"Wallops Island USA"],
				  ["Kodiak",	   	57.43, -152.33,   0,  57.43,"Kodiak Island Alaska"],
				  ["Mojave",	   	35.0,  -118,      0,  35.,  "California USA"],
				  ["Rocket Lab LC-1",  -39.26,  177.86, 0.1,  39.25,"New Zealand's Mahia Peninsula"],
				  ["Omelek Island",    	  9.3,  167.73,   0,   9.3, "Republic of the Marshall Islands"],
				  ["Puerto Rico",    	18.26,   65.61,   0,  18.26,"USA (access to all orbital inclinations)"],
				  ["BO Corn Ranch",	31.42,-104.76, 1.23, 31.42,"Blue Origin spaceport USA"],
				  ["SpaceX Boca Chica",	26.,	-97.15,	0.1,  26.0,"SpaceX South Texas Launch Site"],
				  ["Baikonur",		45.96,  63.30,  0.1,  51.6,"Kazakhstan (former USSR)"],
				  ["Sea Launch (Equator)", 0.,  -154.0, 0.02,  0.0,"Best way to reach geosynchronous orbit"],
				  ["Kuru (ESA)",       	 5.23,  -52.77, 0.1,  5.23,"French Guiana"],
				  ["Jiuquan (China)",    41.95, 100.28,  1., 40.95,"China"],
				  ["Shriharikota (India)",13.79, 80.25, 0.1, 44.,  "India"],
				  ["Alcantara (Brazil)", -2.28, -44.38,  .05, 2.28,"Brazil"],
				  ["Tanegashima (Japan)", 30.4,  131.7, 0.1, 30.4, "Japan"]];


	var s_orbit_count = 8;
	var s_orbit_data = [["LEO",  200,     0,-1,  0,"Low Earth orbit"],
			   ["ISS",   409,   418,51.6,0,"International Space Station orbit"],
			   ["SSO",   500,     0, 98, 0,"Sun-synchronous orbit"],
			   ["GTO",   200, 35786, -1, 0,"Geosynchronous transfer orbit"],
			   ["GEO",   35786,   0, -1, 0,"Geosynchronous equatorial orbit"],
			   ["Moon",  200,     0, -1, 3100,"Trans-Lunar injection orbit"],
			   ["Mars",  200,     0, -1, 3613,"Trans-Mars injection orbit"],
			   ["Venus", 200,     0, -1, 3506,"Trans-Venus injection orbit"]];
							  
	var s_stages_count = 2;
	var s_stages_name = ["2", "3"];

	var s_fuel_count = 5;
	var s_fuel_name = ["Lox/Kerosene", "Lox/Methane", "Lox/LH2", "Monopropellant", "Solid"];
	var s_cycle_count = 4;
	var s_cycle_name =     [["Staged Combustion","Most effective but more difficult to design cycle"],
				["Gas-Generator","Most common average efficiency cycle"],
				["Electric","Provides close to open cycle efficiency in case of jettison of used batteries"],
				["Pressure Fed","The simplest cycle with low efficiency"]];
	var s_fuel_invert = [1,1,1,1,1,1, 0,0,0,0];
	var s_slider = [el1st_Dry_to_Wet_mass_ratio_Range, el2nd_Dry_to_Wet_mass_ratio_Range, el3rd_Dry_to_Wet_mass_ratio_Range, elUnused_propellant_of_1st_Stage_Range,
					elUnused_propellant_of_2nd_Stage_Range, elUnused_propellant_of_Transfer_Orbit_Stage_Range, elFirst_stage_isp_sea_level_Range,
					elFirst_stage_isp_vac_Range, elSecond_stage_isp_vac_Range, elTransfer_Orbit_Stage_isp_Range, elSpecific_Impulse_Variation_Range];
	var s_slider_edit = [el1st_Dry_to_Wet_mass_ratio, el2nd_Dry_to_Wet_mass_ratio, el3rd_Dry_to_Wet_mass_ratio, elUnused_propellant_of_1st_Stage,
					elUnused_propellant_of_2nd_Stage, elUnused_propellant_of_Transfer_Orbit_Stage, elFirst_stage_isp_sea_level,
					elFirst_stage_isp_vac, elSecond_stage_isp_vac, elTransfer_Orbit_Stage_isp, elSpecific_Impulse_Variation];

	var s_cycle_data = [[ 1.,   1.,   1.,   1.  ],  //Staged
			    [ 0.89, 0.92, 0.95, 0.95],  //Gas-Gen
			    [ 0.85, 0.90, 0.92, 0.92],  //Electric
			    [ 0.79, 0.86, 0.85, 0.85]]; //Pressure Fed

	var s_fuel_data_max = [[ 8,  9, 20, 3, 3,   3, 320, 350, 375, 375],  //Lox/Ker
			       [ 9, 10, 20, 3, 3,   3, 335, 370, 390, 390],  //Lox/Meth
			       [14, 14, 20, 3, 3,   3, 410, 450, 490, 490],  //Lox/LH2
			       [13, 13, 20, 1, 1,   1, 270, 300, 300, 300],  //Mono
			       [13, 13, 20, 0, 0,   0, 290, 320, 320, 320]]; //Solid
	
	var s_fuel_data_min = [[5,  4.,  10, 1, 0.5, 0.5, 283, 310, 332, 332],  //Lox/Ker 
			       [6,  5.,  10, 1, 0.5, 0.5, 297, 327, 345, 345],  //Lox/Meth
			       [10, 8.2, 10, 1, 0.5, 0.5, 363, 399, 434, 434],  //Lox/LH2 
			       [8,  7.,  10, 0, 0.,  0.,  239, 266, 266, 266],  //Mono    
			       [8,  7.,  10, 0, 0.,  0.,  257, 283, 283, 283]]; //Solid   
	
	var s_rocket_count = 27;
	var s_rocket_data =  [["Custom Rocket...",			1.20,   32475, 1.7,  150, 3500,  0,  775,   24.86,   0.,     8.,   10.,     20,    2., 2.,   1,   290.5, 327,   365, 320, 0,0, 0,0, 0,3,    "Cape Canaveral",	"LEO", 0, "Designed Rocket - engine based"],
			     ["NASA Saturn V",			1.165,2909200,10.1, 8000, 3500,  0, 48600,  21.284,  4.228,  5.677,  8.081, 10.976,2.6, 2.0, 2,   263.0, 304,   421, 421, 0,1, 2,1, 2,1,    "Cape Canaveral",	"Moon",0, "Apollo lunar program launcher"],
			     ["Launcher Rocket-1",		1.19,   32600, 1.7,  150, 3500,  0,  750,   25.00,   0.0,    7.9,    10.,   20,    2,   2,   1,   290.5, 327,   365, 320, 0,0, 0,0, 0,3,    "Wallops",	"LEO", 0, "4 E2 engines at the 1st stage (project)"],
			     ["Launcher XL",			1.2,    73540, 2.1,  400, 3500,  0, 1500,   13.65,   2.,     8.0,    10.,   20,    2,   2,   1,   290.5, 327,   365, 320, 0,0, 0,0, 0,3,    "Wallops",	"SSO", 0, "9 E2 engines at the 1st stage (project)"],
			     ["Launcher Light",			1.15,    8500, 1.1,   30, 3500,  0,  150,    12.3,   3.,      9.5,   12.,   19,    2.,  2.,  1,   290.5, 327,   318, 318, 0,0, 0,3, 0,3,    "Wallops",	"LEO", 0, "1 E2 engine at the 1st stage, pres fed 2nd stage"],
			     ["Launcher Nano",			1.5,      500,0.45,    0, 3500,  0,    1,   24.00,   4.,    23.00, 23.00,   15,    3,   3,   3,   225.0, 270,   315, 300, 0,3, 0,3, 0,3,    "Wallops",	"LEO", 0, "The smallest orbital launcher (project)"],
			     ["Yuzhnoye Zenit-2",		1.605, 443730, 4.15,1800, 3500,  0,13470,   20.551,  0.,     7.93,  9.15,   20,    1.2, 1.2, 0.8, 309.0, 336,   349, 352, 0,0, 0,0, 0,0,    "Baikonur",		"LEO", 0, "Yuzhnoye Ukraine"],
			     ["Yuzhnoye Zenit-3SL",		1.57,  463220, 4.15,1850, 3500,  0, 3170,   23.499, 4.251,   7.78,  9.15,   14.42, 1.2, 1.2, 0.8, 309.5, 337.2, 350, 361, 0,0, 0,0, 0,0,    "Sea Launch (Equator)",	"GEO", 0, "Yuzhnoye Ukraine"],
			     ["ULA Delta-IV Medium",		1.21,  250570, 5.1, 2800, 4500,  0,11470,    9.64,   0.,    11.70, 11.79,   20,    2,   2,   0.8, 360.0, 412,   462, 300, 2,1, 2,1, 2,1,    "Cape Canaveral",	"LEO", 0, "United Launch Alliance"],
			     ["ULA Atlas V 401",		1.15,  328770, 4.2, 2900, 4500,  0, 9800,    7.05,   0.,     7.04,   10.1,  20,    3,   3,   0.8, 311.9, 338.4, 450, 300, 0,0, 2,0, 2,0,    "Cape Canaveral",	"ISS", 0, "United Launch Alliance"],
			     ["Orbital (NG now) Antares 100",	1.19,  274735, 3.9,  970, 4500,  0, 4600,    5.10,   0.,     7.17,   8.69,  20,    3,   0,   0.8, 297.,  331.,  301, 300, 0,0, 4,1, 4,1,    "Wallops",		"LEO", 0, "Orbital Sciences Corporation (Aj-26)"],
			     ["Northrop Grumman Antares 230",	1.32,  287000, 3.9,  970, 4500,  0, 6500,    9.103,  0.,     7.845,  7.985, 20,    3,   0,   0.8, 311.9, 339.2, 304, 300, 0,0, 4,1, 4,1,    "Wallops",		"LEO", 0, "Northrop Grumman (RD-181)"],
			     ["Northrop Grumman Pegasus",	3.18,   18280, 1.27, 100, 3500,  0,  443,   23.31,   2.39,  13.34,  10.39,  13.48, 0,   0,   0,   270.0, 295,   289, 287, 4,1, 4,1, 4,1,    "Vandenberg",		"LEO", 1, "Northrop Grumman Air Launch"],
			     ["SpaceX Falcon 1e",		1.19,   46955, 1.7,  145, 3500,  0,  650,   10.41,   0.00,   6.13,  11.07,  20.00, 3,   3,   1,   263.0, 304,   317, 300, 0,1, 0,3, 0,3,    "Omelek Island",		"LEO", 0, "First SpaceX Launcher"],
			     ["SpaceX Falcon 9 V1.0",		1.22,  308000,3.66, 1000, 3500,  0, 8500,   16.56,   0.00,   6.74,   5.96,  20.00, 2.0, 2.0, 1,   266.0, 304,   336, 300, 0,1, 0,1, 0,1,    "Cape Canaveral",	"LEO", 0, "SpaceX"],
			     ["SpaceX Falcon 9 V1.1",		1.19,  490600, 5.2, 1900, 3500,  0, 13150,  14.656,  0.00,   5.493,  5.425, 20.00, 3.0, 3.0, 1,   282.0, 311,   342, 300, 0,1, 0,1, 0,1,    "Cape Canaveral",	"LEO", 0, "SpaceX"],
			     ["SpaceX Falcon 9 FT",		1.41,  524554, 5.2, 1700, 3500,  0, 22800,  20.93,   0.00,   5.14,   4.04,  20.00, 1.0, 1.0, 1,   286.0, 321,   348, 300, 0,1, 0,1, 0,1,    "Cape Canaveral",	"LEO", 0, "Heavy SpaceX Launcher"],
			     ["SpaceX Starship",		1.41, 5150000, 9.0,    0, 3500,  0,150000,  25.9,    0.00,   14.0,   9.1,	10., 1.5, 1.5,  1,   330.0, 356,   380, 440, 1,0, 1,0, 1,0,    "SpaceX Boca Chica",		"LEO", 0, "SpaceX (project)"],
			     ["Rocket Lab Electron",		1.32,   12355, 1.2,   44, 3500, 50,   150,  20.16,   1.83,   9.31,  10.42,  18.00, 2.,  2.,  1,   256.0, 303,   333, 250, 0,2, 0,2, 3,3,    "Rocket Lab LC-1",	"SSO", 0, "Rocketlab"],
			     ["Blue Origin New Glenn 2st",	1.22, 1380000, 7.0, 4000, 3500,  0, 45000,  19.564,  0.00,   9.91,  7.037,  10.909,1,   1,   1,   310.0, 335,   358, 440, 1,0, 1,0, 1,0,    "Cape Canaveral",		"LEO", 0, "Blue Origin 2-Stages (Superceded) (project)"],
			     ["Blue Origin New Glenn 3st",	1.20, 1435000, 7.0, 4000, 3500,  0, 20000,  22.647,  5.761,  9.91,  7.037,  10.909,1,   1,   1,   310.0, 335,   358, 440, 1,0, 1,0, 2,1,    "Cape Canaveral",		"Mars",0, "Blue Origin 3-Stages (Superceded) (project)"],
			     ["Virgin Orbit Launcher One",	1.44,   22900, 1.6,  100, 3500,  0,   300,  11.13,   0.00,   9.00,   9.00,  20.00, 3,   3,   1,   290.0, 308,   328, 300, 0,1, 0,1, 0,1,    "Mojave",		"SSO", 1, "Virgin Orbit (project)"],
			     ["Relativity Terran 1 ",		1.2,    55500, 2.7,  400, 3500,   0, 1250,  17.50,   0.00,   9.00,   9.00,  20.00, 2,   2,   1,   267.0, 310,   360, 300, 1,1, 1,1, 1,1,    "Cape Canaveral",	"LEO", 0, "Relativity (project)"],
			     ["Astra Rocket-3",			1.4,    10400, 1.32,   30, 3500,  0,   100,  11.0,    0.00,  10.00,   9.00,  20.00, 2,   2,   1,   234.0, 284,   315, 300, 0,2, 0,3, 3,3,    "Kodiak",		"LEO", 0, "Astra (project)"],
			     ["Firefly Alpha",			1.25,   52670, 2.21,  330, 3500,  0,  1000,  23.11,   0.00,   7.00,   6.00,  20.00, 3,   2,   1,   265.0, 295.6, 322, 300, 0,1, 0,1, 0,1,    "Vandenberg",	"LEO", 0, "Firefly (project)"],
			     ["ABL RS1 (Internal engines)",	1.2,    46027, 1.83,  400, 3500,  0,  1200,  15.21,   0.00,   5.00,   4.00,  20.00, 3,   2,   1,   265.0, 295.6, 322, 300, 0,1, 0,1, 0,1,    "Cape Canaveral",	"LEO", 0, "ABL Space Systems (project)"],
			     ["ABL RS1 (Ursa engines)",		1.2,    25260, 1.83,  300, 3500,  0,   900,  11.75,   0.00,   5.00,   4.00,  20.00, 3,   2,   1,   262.0, 308,   345, 300, 0,0, 0,0, 0,0,    "Cape Canaveral",	"LEO", 0, "with URSA Major Tech engines (project)"]
				 ];
	var s_engine_count = 34;
	var s_engine_data = [["Launcher E-2",		10000.,	290.5, 327., 0, 0, 4,"Launcher 1st stage"],
			     ["Launcher E-2 vac",	12600.,	  0.0, 365., 0, 0, 1,"Launcher 2nd stage"],				
			     ["Ursa Ripley",		15900., 262.0, 308., 0, 0, 1,"URSA Major ORSC engine for 1st stage"],				
			     ["Ursa Hadley",		2900.,	  0.0, 345., 0, 0, 1,"URSA Major ORSC engine for 2nd stage"],
			     ["RL Rutherford",		1800.,	256.0, 303., 0, 2, 9,"Rocket Lab Electron 1st stage"],				
			     ["RL Rutherford vac", 	2500.,	  0.0, 333.,  0, 2, 1,"Rocketlab Electron 2nd stage"],
			     ["Virgin Newton III",	33600.,	290.0, 308.,  0, 1, 1,"Virgin Orbit Launcherone 1st stage"],				
			     ["Virgin Newton IV", 	2200.,	  0.0, 328.,  0, 1, 1,"Virgin Orbit Launcherone 2nd stage"],				
			     ["Firefly Reaver",		16900.,	265.0, 295.6, 0, 1, 4,"Firefly Alpha 1st stage"],				
			     ["Firefly Lightning",	7100.,    0.0, 322.,  0, 1, 1,"Firefly Alpha 2nd stage"],				
			     ["Relativity Aeon-1",	7620.,	267.0, 310.,  1, 1, 9,"Relativity Space Terran-1 1st stage"],				
			     ["Relativity Aeon-1 vac",	10200.,	  0.0, 360.,  1, 1, 1,"Relativity Space Terran-1 2nd stage"],
			     ["Isar Aqula SL",		7650.,	256.0, 303.,  0, 1, 9,"Isar Aerospace Spectrum 1st stage"],				
			     ["Isar Aqula VAC",		9580.,	  0.0, 333.,  0, 1, 1,"Isar Aerospace Spectrum 2nd stage"],	
			     ["SpaceX Merlin 1C",	56700.,	263.0, 304.,  0, 1, 1,"SpaceX Falcone-1 1st stage"],				
			     ["SpaceX Kerstel 2",	3100.,	  0.0, 317.,  0, 3, 1,"SpaceX Falcone-1 2nd stage"],				
			     ["SpaceX Merlin 1D+",	86200.,	282.0, 311.,  0, 1, 9,"SpaceX Falcone-9FT 1st stage"],				
			     ["SpaceX Merlin 1D+v",	95300.,	  0.0, 348.,  0, 1, 1,"SpaceX Falcone-9FT 2nd stage"],	
			     ["Energomash RD-170",	740000,	309.5, 337.2, 0, 0, 1,"Yuzhnoye Zenit 1st stage"],				
			     ["Energomash RD-120",	93000.,	  0.0, 349.,  0, 0, 1,"Yuzhnoye Zenit 2nd stage"],				
			     ["Energomash RD-180",	390000,	311.9, 338.4, 0, 0, 1,"United Launch Alliance Atlas V 1st stage"],
			     ["AR RL-10C",		10400.,	  0.0, 450.,  2, 0, 1,"United Launch Alliance Atlas V 2nd stage"],
			     ["Energomash RD-181",	196000,	311.9, 339.2, 0, 0, 2,"Northrop Grumman Antares 230 1st stage"],				
			     ["NG Castor 30XL",		48300.,	  0.0, 304.,  4, 3, 1,"Northrop Grumman Antares 230 2nd stage"],				
			     ["AR F-1",			690000,	263.0, 304.,  0, 1, 5,"Saturn V 1st stage"],				
			     ["AR J-2",			104000,	  0.0, 421.,  2, 1, 5,"Saturn V 2nd stage"],				
			     ["AR RS-68A",		320000,	360.0, 412.,  2, 1, 1,"United Launch Alliance Delta IV 1st stage"],				
			     ["AR RL-10B",		11300.,	  0.0, 462.,  2, 0, 1,"United Launch Alliance Delta IV 2nd stage"],				
			     ["AR AJ-26",		166000,	297.0, 331.,  0, 0, 2,"Orbital (NG now) Antares 100 1st stage"],				
			     ["NG Castor 30A",		30000.,	  0.0, 301.,  4, 3, 1,"Orbital (NG now) Antares 100 2nd stage"],				
			     ["Blue Origin BE-4",	250000, 310.0, 335.,  1, 0, 7,"Blue Origin New Glenn 1st stage"],				
			     ["BLue Origin BE-4U",	290000,	  0.0, 358.,  1, 0, 1,"Blue Origin New Glenn 2nd stage"],				
			     ["SpaceX Raptor",		200000,	330.0, 356.,  1, 0, 37,"SpaceX Starship 1st stage"],				
			     ["SpaceX Raptor vac",	230000,	  0.0, 380.,  1, 0, 3,"SpaceX Starship 2nd stage"],				
				];
	var s_desined_first = false;
	
	function closeModel(){
		var modal = document.getElementById("myModal");
		modal.style.display = "none";
	}

	function openAbout() {
		var modal = document.getElementById("myModal");
		modal.style.display = "block";
		var popupContent1 = '<p>&emsp;This software is not designed to perform space launcher calculations because the method used is an approximation and is not accurate enough. The software also does not take into account the possibility of optimizing due to multiple burn maneuvers, which is especially effective for GTO and GEO orbits. It is only intended to assess the impact of the main rocket characteristics on the payload mass, and the resulting accuracy is about 10%. In addition it is assumed that the rocket design is conventional, meaning the body must be cylindrical with an aspect ratio of 20 to 30, the thrust-to-weight ratio of the first stage should be from 1.2 to 1.6, the mass ratio of the first to second stage should be from 1:0.05 to 1:0.25, and the fairing should jettison shortly after the second stage ignition upon reaching a predetermined velocity of 3500 m/s, which in general corresponds to a flight altitude of more than 95 km. To achieve high orbits, the upper stage engine must be capable of multiple restarts . When calculating possible orbits, it should also be taken into account that some space ports impose certain restrictions on the permissible inclinations of the orbits. This is usually due to an active trajectory leg passing over a populated area. For example, from the Canaveral spaceport, it is forbidden to to inject directly into SSO.</p>';
		var popupContent2 = '<p>&emsp;The software allows users to compare the relative characteristics of launchers, but in contrast to common approach percentages are used here, which is easier for an amateur. If it is more convenient to use the absolute values of the rocket stages&#039; masses, then these values can be entered in the "Output" section once the "Expand" checkbox is selected next to "Result". Afterwards these values will be converted into relative values. Values can only be entered in cells marked with a border. The velocity losses are calculated according to the Y. Lobanovsky method described in the article: "Delta velocity prediction for injection into Low Earth Orbit." This software provides two options - calculation based on an existing launcher, which allows you to evaluate its level of performance, or the engines-based calculation, which allows you to evaluate the characteristics of a hypothetical space launcher that can be created by applying a certain number of existing engines. For the second calculation option, select "New Project" in the "Rocket" menu. To compare the effectiveness of different fuels and cycles, it is convenient to use the averaged characteristics mode, "Set averages." The software has reasonable restrictions on the various characteristics of the rocket. If you want to go beyond these limits, you can remove this restriction by deselecting "Limitation ON." To display more information select "Expand" mode for "Result".</p>';
		var popupContent3 = '<p>&emsp;All of the rockets characteristics are obtained from the Internet. They are averaged and may differ from the specific case of launch. Since many of the specifications of the majority of projected launchers have not been published, they are assumed by the author based on his experience to ensure the declared payload. Some of these specifications may turn out to be practically impossible, since most companies use very aggressive predictions. </p>';
		var popupContent4 = 'Igor Nikishchenko, Author and Chief Designer, Launcher'
		var modelContent = popupContent1 + popupContent2 + popupContent3 + popupContent4;
		var strModel = document.getElementById("popupContent");
		strModel.innerHTML = modelContent;
		var modelTitle = document.getElementById("modelTitle");
		modelTitle.innerHTML = "Background and usage";
	}

	function openLicense() {
		var modal = document.getElementById("myModal");
		modal.style.display = "block";
		var popupContent1 = '<p>MIT License</p><p>Copyright (c) 2020 Launcher Inc.</p>';
		var popupContent2 = '<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the &quot;Software&quot;), to deal in the Software without restriction, including without limitation the rights copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>';
		var popupContent3 = '<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>';
		var popupContent4 = '<p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, AUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>';
		var modelContent = popupContent1 + popupContent2 + popupContent3 + popupContent4;
		var strModel = document.getElementById("popupContent");
		strModel.innerHTML = modelContent;
		var modelTitle = document.getElementById("modelTitle");
		modelTitle.innerHTML = "MIT License";
	}

	function Rad2Deg(radians)
	{
		return radians * (180./Math.PI);
	}
	
	function Deg2Rad(degrees)
	{
		return degrees * (Math.PI/180.);
	}

	function CalculateTargetVelocity()
	{
		var Starting_point_Altitude = parseFloat(elStarting_point_Altitude.value);
		var Additional_Speed = parseFloat(elAdditional_Speed.value);
		var Orbit_Perigee = parseFloat(elOrbit_Perigee.value);
		var Orbit_Apogee = parseFloat(elOrbit_Apogee.value);
		var Spaceport_latitude = parseFloat(elSpaceport_latitude.value);
		var Orbit_Inclination;
		if (elOrbit.selectedIndex == 2)
		{
			Orbit_Inclination = 95.7+.00296*Orbit_Perigee+7.97e-7*Orbit_Perigee*Orbit_Perigee;
			elOrbit_Inclination.value = Orbit_Inclination.toFixed(2);
		} else
			Orbit_Inclination = parseFloat(elOrbit_Inclination.value);
		
		var Extra_speed_for_flight_to_the_planets = parseFloat(elExtra_speed_for_flight_to_the_planets.value);
		var Intermediate_angle = Math.abs(Orbit_Inclination) > Math.abs(Spaceport_latitude) ?
				(Rad2Deg(Math.asin(Math.cos(Deg2Rad(Orbit_Inclination))/Math.cos(Deg2Rad(Spaceport_latitude))))) :
				(90.-Rad2Deg(Math.asin(1.-(Math.cos(Deg2Rad(Orbit_Inclination))/Math.cos(Deg2Rad(Spaceport_latitude))))));
		elIntermediate_angle.textContent = Intermediate_angle.toFixed(2);
		
		var earth_radius = 6371.;
		var gravity_const = 398600500000.;
		
		var Launch_point_speed = 465.*Math.cos(Deg2Rad(Spaceport_latitude));
		elLaunch_point_speed.textContent = Launch_point_speed.toFixed(1);
		
		var Starting_point_Altitude_orbital_velocity = Math.sqrt(gravity_const/(earth_radius+Starting_point_Altitude));
		elStarting_point_Altitude_orbital_velocity.textContent = Starting_point_Altitude_orbital_velocity.toFixed(1);
		
		var Absolute_orbital_velocity = Math.sqrt(gravity_const/(earth_radius+Orbit_Perigee));
		elAbsolute_orbital_velocity.textContent = Absolute_orbital_velocity.toFixed(1);
		
		var Perigee_velocity = (Orbit_Apogee == 0) ?
			1000.*Math.sqrt(398600.5*(2./(6371.+Orbit_Perigee)-1/(6371.+Orbit_Perigee))) :
			1000.*Math.sqrt(398600.5*(2./(6371.+Orbit_Perigee)-1/(6371.+.5*(Orbit_Perigee+Orbit_Apogee))));
		elPerigee_velocity.textContent = Perigee_velocity.toFixed(1);

		var Apogee_velocity = (Orbit_Apogee == 0) ?
			Perigee_velocity :
			1000.*Math.sqrt(398600.5*(2./(6371.+Orbit_Apogee)-1/(6371.+.5*(Orbit_Perigee+Orbit_Apogee))));
		elApogee_velocity.textContent = Apogee_velocity.toFixed(1);

		var Orbital_period = (Orbit_Apogee == 0) ?
			2.*Math.PI/Math.sqrt(398600.5)*Math.pow(6371+Orbit_Perigee, 3./2.)/60. :
			2.*Math.PI/Math.sqrt(398600.5)*Math.pow(6371+.5*(Orbit_Perigee+Orbit_Apogee), 3./2.)/60.;
		elOrbital_period.textContent = Orbital_period.toFixed(2);

		var Vsp_for_inclination_change = (elOrbit.selectedIndex == 4) ?
//			2*1597.*Math.sin(Math.abs(Deg2Rad(Orbit_Inclination)/2.)) :
			-3.215E-3*Math.pow(Orbit_Inclination,3) + .5134*Math.pow(Orbit_Inclination,2) + .571*Orbit_Inclination :
			0.;
		elVsp_for_inclination_change.textContent = Vsp_for_inclination_change.toFixed(1);
		
		var tmp_velocity = Math.sqrt(Launch_point_speed*Launch_point_speed + Absolute_orbital_velocity*Absolute_orbital_velocity
										-2.*Launch_point_speed*Absolute_orbital_velocity*Math.sin(Deg2Rad(Intermediate_angle)));

		var Orbital_velocity = (465.*Math.cos(Deg2Rad(Orbit_Inclination)) < Absolute_orbital_velocity) ?
								tmp_velocity : -tmp_velocity;

		tmp_velocity = Math.sqrt(Launch_point_speed*Launch_point_speed + Absolute_orbital_velocity*Absolute_orbital_velocity
										-2.*Launch_point_speed*Absolute_orbital_velocity*Math.sin(Deg2Rad(Intermediate_angle)+1e-7));

		var Orbital_velocity_ = (465.*Math.cos(Deg2Rad(Orbit_Inclination)) < Absolute_orbital_velocity) ?
								tmp_velocity : -tmp_velocity;

		elOrbital_velocity.textContent = Orbital_velocity.toFixed(1);
		
		var Orbital_velocity_increment_due_to_the_Earth_rotation = Absolute_orbital_velocity - Orbital_velocity;
		elOrbital_velocity_increment_due_to_the_Earth_rotation.textContent = Orbital_velocity_increment_due_to_the_Earth_rotation.toFixed(1);
		
		var Launch_azimuth = Rad2Deg(Math.acos(Absolute_orbital_velocity/Orbital_velocity*Math.cos(Deg2Rad(Intermediate_angle))));
		var Launch_azimuth_ = Rad2Deg(Math.acos(Absolute_orbital_velocity/Orbital_velocity_*Math.cos(Deg2Rad(Intermediate_angle)+1e-7)));
		if(Launch_azimuth > Launch_azimuth_) Launch_azimuth = -Launch_azimuth;
		elLaunch_azimuth.textContent = Launch_azimuth.toFixed(2);

		Absolute_orbital_velocity0 = Absolute_orbital_velocity;
		if (Absolute_orbital_velocity0 < 7788.5)Absolute_orbital_velocity0 = 7788.5;
		var Vsp_for_circular_orbit0 = Starting_point_Altitude_orbital_velocity
				+Starting_point_Altitude_orbital_velocity*(Starting_point_Altitude_orbital_velocity/Math.sqrt(.5*(Starting_point_Altitude_orbital_velocity*Starting_point_Altitude_orbital_velocity+Absolute_orbital_velocity0*Absolute_orbital_velocity0))-1.)
				+Absolute_orbital_velocity0*(1.-Absolute_orbital_velocity0/Math.sqrt(.5*(Starting_point_Altitude_orbital_velocity*Starting_point_Altitude_orbital_velocity+Absolute_orbital_velocity0*Absolute_orbital_velocity0)));
		Irremovable_Gravity_Losses = - 242.5 + Vsp_for_circular_orbit0 - Absolute_orbital_velocity0;

		var Vsp_for_circular_orbit = Starting_point_Altitude_orbital_velocity
				+Starting_point_Altitude_orbital_velocity*(Starting_point_Altitude_orbital_velocity/Math.sqrt(.5*(Starting_point_Altitude_orbital_velocity*Starting_point_Altitude_orbital_velocity+Absolute_orbital_velocity*Absolute_orbital_velocity))-1.)
				+Absolute_orbital_velocity*(1.-Absolute_orbital_velocity/Math.sqrt(.5*(Starting_point_Altitude_orbital_velocity*Starting_point_Altitude_orbital_velocity+Absolute_orbital_velocity*Absolute_orbital_velocity)))
				-Orbital_velocity_increment_due_to_the_Earth_rotation -Additional_Speed +Vsp_for_inclination_change;
		elVsp_for_circular_orbit.textContent = Vsp_for_circular_orbit.toFixed(1);
		
		Vsp_for_target_orbit = (Orbit_Apogee == 0) ?
			Vsp_for_circular_orbit +Extra_speed_for_flight_to_the_planets : 
			(Vsp_for_circular_orbit +Extra_speed_for_flight_to_the_planets
			  +Absolute_orbital_velocity*(Absolute_orbital_velocity/Math.sqrt(.5*(Absolute_orbital_velocity*Absolute_orbital_velocity+gravity_const/(earth_radius+Orbit_Apogee)))-1.));
		elVsp_for_target_orbit.textContent = Vsp_for_target_orbit.toFixed(1);

		var Injection_velocity = Vsp_for_target_orbit+Orbital_velocity_increment_due_to_the_Earth_rotation;
		elInjection_velocity.textContent = Injection_velocity.toFixed(1);
		
		var Vsp_for_LEO = 8031.-Orbital_velocity_increment_due_to_the_Earth_rotation-Additional_Speed;
		elVsp_for_LEO.textContent = Vsp_for_LEO.toFixed(1);
	}

	function CalculateTargetMass()
	{
		var Assumed_payload_mass = parseFloat(elAssumed_payload_mass.value);
		var Vsp_for_LEO = parseFloat(elVsp_for_LEO.textContent);
		var Fairing_jettison_velocity = parseFloat(elFairing_jettison_velocity.value);
		var Fairing_mass = parseFloat(elFairing_mass.value);
		var Rocket_Mass = parseFloat(elRocket_Mass.value);
		var Max_midsection_D = parseFloat(elMax_midsection_D.value);
		var Thrust_to_weight_ratio = parseFloat(elThrust_to_weight_ratio.value);
		var v2nd_Stage_mass_ratio = parseFloat(el2nd_Stage_mass_ratio.value);
		var v3rd_Stage_mass_ratio = parseFloat(el3rd_Stage_mass_ratio.value);
		var v1st_Dry_to_Wet_mass_ratio = parseFloat(el1st_Dry_to_Wet_mass_ratio.value);
		var v2nd_Dry_to_Wet_mass_ratio = parseFloat(el2nd_Dry_to_Wet_mass_ratio.value);
		var Unused_propellant_of_1st_Stage = parseFloat(elUnused_propellant_of_1st_Stage.value);
		var Unused_propellant_of_2nd_Stage = parseFloat(elUnused_propellant_of_2nd_Stage.value);
		var Specific_Impulse_Variation = parseFloat(elSpecific_Impulse_Variation.value);
		var First_stage_engine_thrust = parseFloat(elFirst_stage_engine_thrust.value);
		var First_stage_engines_number = parseFloat(elFirst_stage_engines_number.value);
		var First_stage_isp_vac = parseFloat(elFirst_stage_isp_vac.value)*Specific_Impulse_Variation/100.;
		var First_stage_isp_sea_level = parseFloat(elFirst_stage_isp_sea_level.value)*Specific_Impulse_Variation/100.;
		var Second_stage_engine_thrust = parseFloat(elSecond_stage_engine_thrust.value);
		var Second_stage_engines_number = parseFloat(elSecond_stage_engines_number.value);
		var Second_stage_isp_vac = parseFloat(elSecond_stage_isp_vac.value)*Specific_Impulse_Variation/100.;
		var Transfer_Orbit_Stage_isp = parseFloat(elTransfer_Orbit_Stage_isp.value)*Specific_Impulse_Variation/100.;
		var v3rd_Dry_to_Wet_mass_ratio = parseFloat(el3rd_Dry_to_Wet_mass_ratio.value);
		var Unused_propellant_of_Transfer_Orbit_Stage = parseFloat(elUnused_propellant_of_Transfer_Orbit_Stage.value);
		var Jettisoned_battery_mass = parseFloat(elJettisoned_battery_mass.value);

		//=== Output ===
		var First_stage_average_trajectory_isp = .145*First_stage_isp_sea_level+.855*First_stage_isp_vac;

		if (Absolute_Mass == 0)
		{
			var First_stage_wet_mass = (Rocket_Mass*(1.-v2nd_Stage_mass_ratio/100.));
			var First_stage_propellant_mass = First_stage_wet_mass*(1.-v1st_Dry_to_Wet_mass_ratio/100.);
			var First_stage_dry_mass = First_stage_wet_mass - First_stage_propellant_mass;
			var Second_stage_wet_mass = (Rocket_Mass*(v2nd_Stage_mass_ratio/100. - v3rd_Stage_mass_ratio/100.));
			var Second_stage_propellant_mass = Second_stage_wet_mass*(1.-v2nd_Dry_to_Wet_mass_ratio/100.);
			var Second_stage_dry_mass = Second_stage_wet_mass - Second_stage_propellant_mass;
			var Transfer_Orbit_stage_dry_mass = v3rd_Stage_mass_ratio == 0 ? 0 : ((Rocket_Mass*v3rd_Stage_mass_ratio/100.)*v3rd_Dry_to_Wet_mass_ratio/100.);
			var Transfer_Orbit_stage_propellant_mass = (Rocket_Mass*v3rd_Stage_mass_ratio/100.) - Transfer_Orbit_stage_dry_mass;		     	
		} else
		{
			First_stage_propellant_mass = parseFloat(elFirst_stage_propellant_mass.value);
			First_stage_dry_mass = parseFloat(elFirst_stage_dry_mass.value);
			First_stage_wet_mass = First_stage_dry_mass + First_stage_propellant_mass;
			Second_stage_propellant_mass = parseFloat(elSecond_stage_propellant_mass.value);
			Second_stage_dry_mass = parseFloat(elSecond_stage_dry_mass.value);
			Second_stage_wet_mass = Second_stage_dry_mass + Second_stage_propellant_mass;
			Transfer_Orbit_stage_propellant_mass = parseFloat(elTransfer_Orbit_stage_propellant_mass.value);
			Transfer_Orbit_stage_dry_mass = parseFloat(elTransfer_Orbit_stage_dry_mass.value);
		}

		//=== Losses calculation ===
		var Const = (First_stage_isp_vac-(First_stage_isp_vac-First_stage_isp_sea_level)*.169);
		var Const2 = (Math.exp(112.13/(Const+(Const-First_stage_isp_sea_level)/((1.-.169)*1.8872)*(-.8612))));
		var Gravity_losses_at_specific_altitude = 9.81*(500./Math.sqrt((1.015*Math.sqrt((((Thrust_to_weight_ratio-1.)*9.81)*
				(Const2*(Const/First_stage_isp_sea_level)*
				((Thrust_to_weight_ratio-1.)*9.81)-(1.-Const2*(Const/First_stage_isp_sea_level))*9.81))))*9.81));
		
		var Gravity_losses = 4./3.*
		((Thrust_to_weight_ratio<1.46)
				? Gravity_losses_at_specific_altitude*(1.5+2.5*(Thrust_to_weight_ratio-1.17)-4.25*(Thrust_to_weight_ratio-1.17)*(Thrust_to_weight_ratio-1.17))
				: 1.865*Gravity_losses_at_specific_altitude);
		var Gravity_lossesPr = Gravity_losses + Irremovable_Gravity_Losses;

		//=== Recursion ===
		for (itt = 1; itt <= 5; ++itt)
		{

			Lift_off_Mass = Rocket_Mass + Fairing_mass + Payload_mass;
			var Aerodynamic_losses = Math.exp(-Starting_point_Altitude/7.16)/(Lift_off_Mass/2945000)*Math.pow(Max_midsection_D/10.1, 2.) *
			((Thrust_to_weight_ratio>1.17)
				? (.045+.1*Math.pow(Thrust_to_weight_ratio-1.17, 1.5))*1000.
				: (.045+.1*(1.3332*Thrust_to_weight_ratio*Thrust_to_weight_ratio-2.9399*Thrust_to_weight_ratio+1.6148))*1000.);
		
			var Summary_losses = Gravity_losses+Aerodynamic_losses+145.;
			var Vsp_with_losses = Vsp_for_target_orbit+Summary_losses-242.5;
		
			var First_stage_final_mass = Lift_off_Mass-First_stage_propellant_mass/100.*(100.-Unused_propellant_of_1st_Stage);
			var First_stage_delta_v = 9.80665*First_stage_average_trajectory_isp*Math.log(Lift_off_Mass/First_stage_final_mass);

			var Fairing_jettison_delta_v = (Fairing_jettison_velocity*1.2 > First_stage_delta_v) ? Fairing_jettison_velocity*1.2 : First_stage_delta_v+100.;
			var Second_stage_delta_v_before_fairing_jettison = Fairing_jettison_delta_v-First_stage_delta_v;
			var Second_stage_total_Start_mass = Lift_off_Mass - First_stage_wet_mass;
			var Second_stage_total_mass_before_fairing_jettison =1./(Math.exp((Fairing_jettison_delta_v-First_stage_delta_v)/(Second_stage_isp_vac*9.80665))/Second_stage_total_Start_mass);
			var Second_stage_total_mass_before_battery_jettison = Lift_off_Mass - First_stage_wet_mass - Fairing_mass - .67*Second_stage_propellant_mass;
			var Second_stage_delta_v_before_battery_jettison = 9.80665*Second_stage_isp_vac*
				Math.log((Second_stage_total_mass_before_fairing_jettison-Fairing_mass)/Second_stage_total_mass_before_battery_jettison);

			var Transfer_Orbit_stage_total_Start_mass = Lift_off_Mass - First_stage_wet_mass - Second_stage_wet_mass - Fairing_mass;

			if (v3rd_Stage_mass_ratio == 0)
			{
				var Second_stage_delta_v = Vsp_with_losses-First_stage_delta_v;
				var Second_stage_final_mass = 1./(Math.exp((Second_stage_delta_v
					- Second_stage_delta_v_before_fairing_jettison
					- Second_stage_delta_v_before_battery_jettison)
					/ (Second_stage_isp_vac*9.80665))/(Second_stage_total_mass_before_battery_jettison
					-Jettisoned_battery_mass));
				Payload_mass_calculated = Second_stage_final_mass+Jettisoned_battery_mass-Second_stage_dry_mass-Second_stage_propellant_mass/100.*Unused_propellant_of_2nd_Stage; 
				var Transfer_Orbit_stage_final_mass = Transfer_Orbit_stage_total_Start_mass;

			} else
			{
				Second_stage_final_mass = Transfer_Orbit_stage_total_Start_mass + Second_stage_dry_mass - Jettisoned_battery_mass + Second_stage_propellant_mass*(Unused_propellant_of_2nd_Stage/100.);
				Second_stage_delta_v = Second_stage_delta_v_before_fairing_jettison
					+ Second_stage_delta_v_before_battery_jettison
					+9.80665*Second_stage_isp_vac*Math.log((Second_stage_total_mass_before_battery_jettison-Jettisoned_battery_mass)/Second_stage_final_mass);
				Transfer_Orbit_stage_delta_v_required = v3rd_Stage_mass_ratio == 0 ? 0 :
					(Vsp_with_losses-First_stage_delta_v-Second_stage_delta_v);
				Transfer_Orbit_stage_total_Start_mass = Second_stage_final_mass+Jettisoned_battery_mass-Second_stage_dry_mass-Second_stage_propellant_mass/100.*Unused_propellant_of_2nd_Stage;
				Transfer_Orbit_stage_final_mass = 1./(Math.exp(Transfer_Orbit_stage_delta_v_required/(Transfer_Orbit_Stage_isp*9.80665))/Transfer_Orbit_stage_total_Start_mass);
				Payload_mass_calculated = (Transfer_Orbit_stage_final_mass-Transfer_Orbit_stage_dry_mass-Transfer_Orbit_stage_propellant_mass/100.*Unused_propellant_of_Transfer_Orbit_Stage); 
			}

		//=== Result ===
			if (itt == 1)
			{
				elPayload_mass_calculated.textContent = Payload_mass_calculated.toFixed(1);
			} else if (itt == 5)
			{
				var Assumed_payload_mass_base = parseFloat(elAssumed_payload_mass.value);
				var strComma = Math.round(Payload_mass_calculated);
				if(!!strComma) strComma = strComma.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")
				elPayload_mass_calculated5.textContent = strComma;
				var Payload_change = Payload_mass_calculated/Assumed_payload_mass_base;
				elPayload_change.textContent = (Payload_change * 100.).toFixed(1);	
			}
			Assumed_payload_mass = Payload_mass_calculated;
//			if(elRocket.selectedIndex == 0)elAssumed_payload_mass.value = Assumed_payload_mass;
			Payload_mass = Payload_mass_calculated;
		}

		elLift_off_Mass.textContent = Lift_off_Mass.toFixed(0);
		var Payload_to_Lift_off_mass_ratio = Payload_mass / Lift_off_Mass;
		elPayload_to_Lift_off_mass_ratio.textContent = (Payload_to_Lift_off_mass_ratio * 100.).toFixed(2);
		elGravity_losses_at_specific_altitude.textContent = Gravity_losses_at_specific_altitude.toFixed(1);
		elGravity_losses.textContent = Gravity_lossesPr.toFixed(1);
		elAerodynamic_losses.textContent = Aerodynamic_losses.toFixed(1);
		var Summary_lossesPr = Gravity_lossesPr + Aerodynamic_losses + 145.;
		elSummary_losses.textContent = Summary_lossesPr.toFixed(1);
		var Assumed_losses = Summary_lossesPr/Vsp_for_LEO;
		elAssumed_losses.textContent = (Assumed_losses*100.).toFixed(2);
		elVsp_with_losses.textContent = Vsp_with_losses.toFixed(1);
		elFirst_stage_average_trajectory_isp.textContent = First_stage_average_trajectory_isp.toFixed(1);
		elFirst_stage_propellant_mass.value = First_stage_propellant_mass.toFixed(1);		
		elFirst_stage_dry_mass.value = First_stage_dry_mass.toFixed(1);
		elFirst_stage_final_mass.textContent = First_stage_final_mass.toFixed(1);
		elFirst_stage_delta_v.textContent = First_stage_delta_v.toFixed(1);
		elFairing_jettison_delta_v.textContent = Fairing_jettison_delta_v.toFixed(1);
		elSecond_stage_total_Start_mass.textContent = Second_stage_total_Start_mass.toFixed(1);
		elSecond_stage_total_mass_before_fairing_jettison.textContent = Second_stage_total_mass_before_fairing_jettison.toFixed(1);
		elSecond_stage_total_mass_before_battery_jettison.textContent = Second_stage_total_mass_before_battery_jettison.toFixed(1);
		elSecond_stage_delta_v_before_battery_jettison.textContent = Second_stage_delta_v_before_battery_jettison.toFixed(1);
		elSecond_stage_final_mass.textContent = Second_stage_final_mass.toFixed(1);
		elSecond_stage_delta_v.textContent = Second_stage_delta_v.toFixed(1);
		elSecond_stage_dry_mass.value = Second_stage_dry_mass.toFixed(1);
		elSecond_stage_propellant_mass.value = Second_stage_propellant_mass.toFixed(1);
		elTransfer_Orbit_stage_delta_v_required.textContent = Transfer_Orbit_stage_delta_v_required.toFixed(1);
		elTransfer_Orbit_stage_total_Start_mass.textContent = Transfer_Orbit_stage_total_Start_mass.toFixed(1);
		elTransfer_Orbit_stage_final_mass.textContent = Transfer_Orbit_stage_final_mass.toFixed(1);
		elTransfer_Orbit_stage_dry_mass.value = Transfer_Orbit_stage_dry_mass.toFixed(1);
		elTransfer_Orbit_stage_propellant_mass.value = Transfer_Orbit_stage_propellant_mass.toFixed(1);

		elFirst_stage_run_time.textContent = (First_stage_propellant_mass/100.*(100.-Unused_propellant_of_1st_Stage)/(Lift_off_Mass*Thrust_to_weight_ratio/First_stage_isp_sea_level)).toFixed(0);
		if (elRocket.selectedIndex == 0)
		{
			var Second_stage_engine_thrust = parseFloat(elSecond_stage_engine_thrust.value);
			var Second_stage_engines_number = parseFloat(elSecond_stage_engines_number.value);
			elSecond_stage_run_time.textContent = (Second_stage_propellant_mass/100.*(100.-Unused_propellant_of_2nd_Stage)/(Second_stage_engine_thrust*Second_stage_engines_number/Second_stage_isp_vac)).toFixed(0);
		} else
		{ elSecond_stage_run_time.textContent = '---'; }
//		elTransfer_Orbit_stage_run_time.textContent = (Transfer_Orbit_stage_propellant_mass/(Transfer_Orbit_stage_total_Start_mass*0.5/Transfer_Orbit_Stage_isp)).toFixed(0);

	}

	function Calculate()
	{
		if (elLimitation.checked) SetLimitation();
		CalculateTargetVelocity();
		CalculateTargetMass();
		if(Absolute_Mass == 1) MassRecalculate();
			if (el3rd_Stage_mass_ratio.value == 0)
				elRequired.textContent = "(required)"; 
			 else
				elRequired.textContent = " ";
	}

	function Calculate_Rel()
	{
		Absolute_Mass = 0;
		Calculate();		
	}

       	function CalculationError()
	{
		var Lift_off_Mass = parseFloat(elLift_off_Mass.textContent);
		var First_stage_final_mass = parseFloat(elFirst_stage_final_mass.textContent);
		var Second_stage_total_Start_mass = parseFloat(elSecond_stage_total_Start_mass.textContent);
		var Second_stage_total_mass_before_fairing_jettison = parseFloat(elSecond_stage_total_mass_before_fairing_jettison.textContent);
		var Fairing_mass = parseFloat(elFairing_mass.value);									  	
		var Second_stage_total_mass_before_battery_jettison = parseFloat(elSecond_stage_total_mass_before_battery_jettison.textContent	);
		var Jettisoned_battery_mass = parseFloat(elJettisoned_battery_mass.value);						   	
		var Second_stage_final_mass = parseFloat(elSecond_stage_final_mass.textContent);					     	
		var Transfer_Orbit_stage_total_Start_mass = parseFloat(elTransfer_Orbit_stage_total_Start_mass.textContent);
		var Transfer_Orbit_stage_final_mass = parseFloat(elTransfer_Orbit_stage_final_mass.textContent);
		var First_stage_average_trajectory_isp = parseFloat(elFirst_stage_average_trajectory_isp.textContent);
		var Second_stage_isp_vac = parseFloat(elSecond_stage_isp_vac.value);
		var Transfer_Orbit_Stage_isp = parseFloat(elTransfer_Orbit_Stage_isp.value);
		var Vsp_with_losses = parseFloat(elVsp_with_losses.textContent);
		var Summary_Delta_V = 9.80665*First_stage_average_trajectory_isp*Math.log(Lift_off_Mass/First_stage_final_mass)
		+ 9.80665*Second_stage_isp_vac*Math.log(Second_stage_total_Start_mass/Second_stage_total_mass_before_fairing_jettison)
		+ 9.80665*Second_stage_isp_vac*Math.log((Second_stage_total_mass_before_fairing_jettison - Fairing_mass)/Second_stage_total_mass_before_battery_jettison)
		+ 9.80665*Second_stage_isp_vac*Math.log((Second_stage_total_mass_before_battery_jettison - Jettisoned_battery_mass)/Second_stage_final_mass)
		+ 9.80665*Transfer_Orbit_Stage_isp*Math.log(Transfer_Orbit_stage_total_Start_mass/Transfer_Orbit_stage_final_mass);

		elCalculation_Error.textContent = (Vsp_with_losses - Summary_Delta_V).toFixed(1);

		var First_stage_propellant_mass = parseFloat(elFirst_stage_propellant_mass.value);
		var First_stage_dry_mass = parseFloat(elFirst_stage_dry_mass.value);
		var Second_stage_propellant_mass = parseFloat(elSecond_stage_propellant_mass.value);
		var Second_stage_dry_mass = parseFloat(elSecond_stage_dry_mass.value);
		var Transfer_Orbit_stage_propellant_mass = parseFloat(elTransfer_Orbit_stage_propellant_mass.value);
		var Transfer_Orbit_stage_dry_mass = parseFloat(elTransfer_Orbit_stage_dry_mass.value);
		var Payload_mass = parseFloat(elPayload_mass_calculated5.textContent);
                var Summary_Mass = First_stage_propellant_mass + First_stage_dry_mass
			+ Second_stage_propellant_mass + Second_stage_dry_mass
			+ Transfer_Orbit_stage_propellant_mass + Transfer_Orbit_stage_dry_mass
			+ Fairing_mass + Payload_mass;
			
//		elCalculation_Error.textContent = (Summary_Mass - Lift_off_Mass).toFixed(1);
	}

	function updateStartingPoint()
	{
		elStarting_point_Altitude.value = s_start_point_data[elStartingPoint.selectedIndex][3];
		elSpaceport_latitude.value = s_start_point_data[elStartingPoint.selectedIndex][1];
	}
	
	function updateStartingPointAndCalc()
	{
		updateStartingPoint();
		updateOrbit();
		Calculate();
	}

	function updateOrbit()
	{
		elOrbit_Perigee.value = s_orbit_data[elOrbit.selectedIndex][1];
		
		elOrbit_Apogee.value = s_orbit_data[elOrbit.selectedIndex][2];
			
		if (s_orbit_data[elOrbit.selectedIndex][3] < 0)
			elOrbit_Inclination.value = s_start_point_data[elStartingPoint.selectedIndex][4];
		else
			elOrbit_Inclination.value = s_orbit_data[elOrbit.selectedIndex][3];
			
		elExtra_speed_for_flight_to_the_planets.value = s_orbit_data[elOrbit.selectedIndex][4];

		if (elOrbit.selectedIndex == 4)
		{
			for (var i = 0; i < elsGEO.length; i++)
				elsGEO[i].removeAttribute("style");
			for (var i = 0; i < elsGEOI.length; i++)
				elsGEOI[i].setAttribute("style","display:none");
		} else
		{
			for (var i = 0; i < elsGEO.length; i++)
				elsGEO[i].setAttribute("style","display:none");
			for (var i = 0; i < elsGEOI.length; i++)
				elsGEOI[i].removeAttribute("style");
		}
		elOrbitDescription.textContent = s_orbit_data[elOrbit.selectedIndex][5];
		if (elOrbit.selectedIndex > 4)
			elReference.textContent = "Reference "; 
		 else
			elReference.textContent = "";

	}

	function LatitudeChange()
	{
		if (elOrbit.selectedIndex == 0)
		{
		Spaceport_latitude = Math.abs(parseFloat(elSpaceport_latitude.value));
		Orbit_Inclination = parseFloat(elOrbit_Inclination.value);

		if (Orbit_Inclination < Spaceport_latitude)
			{
			 Orbit_Inclination = Spaceport_latitude;
			 elOrbit_Inclination.value = Orbit_Inclination.toFixed(2);
			}
		}

		if (elOrbit.selectedIndex > 2)
		{
		 Spaceport_latitude = Math.abs(parseFloat(elSpaceport_latitude.value));
		 elOrbit_Inclination.value = Spaceport_latitude.toFixed(2);
		}

		Calculate();
	}
	
	function InclinationChange()
	{
		if (elOrbit.selectedIndex == 0)
		{
		Spaceport_latitude = Math.abs(parseFloat(elSpaceport_latitude.value));
		Orbit_Inclination = parseFloat(elOrbit_Inclination.value);
		if (Orbit_Inclination < Spaceport_latitude)
			{
		 	Orbit_Inclination = Spaceport_latitude;
		 	elOrbit_Inclination.value = Orbit_Inclination.toFixed(2);
			}
		}
		Calculate();
	}

	function OrbitChange()
	{
		var Orbit_Apogee = parseFloat(elOrbit_Apogee.value);
		if (Orbit_Apogee == 0)
		{
		}else
		{
		var Orbit_Perigee = parseFloat(elOrbit_Perigee.value);
		if (Orbit_Apogee < Orbit_Perigee)
		elOrbit_Apogee.value = Orbit_Perigee.toFixed(0);
		}
		Calculate();
	}

	function RangeMinMax(range, input_field, fuel, cycle, index)
	{

		var Lift_off_Mass = parseFloat(elLift_off_Mass.textContent);
		if(Lift_off_Mass > 460000) Lift_off_Mass = 460000;
		var cycle_corr = 1.;
		if(index < 2)
		{
		cycle_corr = 1.;
		if(cycle == 3) cycle_corr = 1.6;
		var orsc_corr = 0.;
		var ThrustToWeight_corr = 0;
		if(index == 0)ThrustToWeight_corr = 0.8*(elThrust_to_weight_ratio.value-1.2);
		if(index == 1)ThrustToWeight_corr = 0.8*(Thrust_To_Weight_2st-1.1);

		if(cycle == 0) orsc_corr = 0.5;
		if(fuel == 4) {cycle_corr = 1.; orsc_corr = 0.;}
		var val_min = (s_fuel_data_min[fuel][index]+orsc_corr+ThrustToWeight_corr)*cycle_corr*Math.pow(Lift_off_Mass/460000,-.085);
		var val_max = (s_fuel_data_max[fuel][index]+orsc_corr+ThrustToWeight_corr)*cycle_corr*Math.pow(Lift_off_Mass/460000,-.085);
		}
		else
		{
		cycle_corr = 1.;
		if(index > 5) cycle_corr = s_cycle_data[cycle][index-6];
		if(fuel == 3) cycle_corr = 1.;
		if(fuel == 4) cycle_corr = 1.;
		var val_min = s_fuel_data_min[fuel][index]*cycle_corr;
		var val_max = s_fuel_data_max[fuel][index]*cycle_corr;
		}

		var input_value = parseFloat(input_field.value);

		if ("min" in range)
			range.min = val_min * 100.;
		else
	    range.setAttribute("min", val_min * 100.);
			
		if ("max" in range)
			range.max = val_max * 100.;
		else
	    range.setAttribute("max", val_max * 100.);
		if (s_fuel_invert[index])
			range.value = (val_min + val_max - input_value) * 100.;
		else
			range.value = input_value * 100.;
	}

	function updateCycle()
	{
		var fuel = [0,0,0,0,0,0,0,0,0,0];
		fuel[6] = elFuel.selectedIndex;
		fuel[7] = elFuel.selectedIndex;
		fuel[8] = elFuel2.selectedIndex;
		fuel[9] = elFuel3.selectedIndex;

		var cycle = [0,0,0,0,0,0,0,0,0,0];
		cycle[6] = elCycle.selectedIndex;
		cycle[7] = elCycle.selectedIndex;
		cycle[8] = elCycle2.selectedIndex;
		cycle[9] = elCycle3.selectedIndex;

		for (var i = 6; i < 10; ++i)
			RangeMinMax(s_slider[i], s_slider_edit[i], fuel[i], cycle[i], i);
		ElectricChange();

	}
	function updateCycleAndCalc()
	{
		updateCycle();
		if (elLimitation.checked)
		{
		    DelLimitation();
		    SetLimitation();
		}
		updateFuel();
		if (elSet_averages.checked) SetAverages(0,10);
		Calculate();
	}

	function updateFuel()
	{
		var fuel = [0,0,0,0,0,0,0,0,0,0];
		fuel[0] = elFuel.selectedIndex;
		fuel[1] = elFuel2.selectedIndex;
		fuel[2] = elFuel3.selectedIndex;
		fuel[3] = elFuel.selectedIndex;
		fuel[4] = elFuel2.selectedIndex;
		fuel[5] = elFuel3.selectedIndex;
		fuel[6] = elFuel.selectedIndex;
		fuel[7] = elFuel.selectedIndex;
		fuel[8] = elFuel2.selectedIndex;
		fuel[9] = elFuel3.selectedIndex;

		var cycle = [0,0,0,0,0,0,0,0,0,0];
		cycle[0] = elCycle.selectedIndex;
		cycle[1] = elCycle2.selectedIndex;
		cycle[2] = elCycle3.selectedIndex;
		cycle[3] = elCycle.selectedIndex;
		cycle[4] = elCycle2.selectedIndex;
		cycle[5] = elCycle3.selectedIndex;
		cycle[6] = elCycle.selectedIndex;
		cycle[7] = elCycle.selectedIndex;
		cycle[8] = elCycle2.selectedIndex;
		cycle[9] = elCycle3.selectedIndex;
		for (var i = 0; i < 10; ++i)
			RangeMinMax(s_slider[i], s_slider_edit[i], fuel[i], cycle[i], i);
	}
	function updateFuelAndCalc()
	{
		updateFuel();
		SolidChange();
		if (elLimitation.checked)
		{
		    DelLimitation();
		    SetLimitation();
		}
		if (elSet_averages.checked) SetAverages(0,10);
		Calculate();
	}

	function updateStages()
	{
		var stages = elStages.selectedIndex;
		if (stages == 0) 
			{ 
				el3rd_Stage_mass_ratio.value = 0 
				Calculate();
			} else
			{
				el3rd_Stage_mass_ratio.value = s_rocket_data[elRocket.selectedIndex][9] 
				if ( el3rd_Stage_mass_ratio.value == 0)
					{
						el3rd_Stage_mass_ratio.value = 3
					}
			}
		Calculate();
		f3stagesChange();
	}

	function updateEngine1()
	{
		var Index = 0;
		var engine = elEngine1.value;
		for (var i=0; i < s_engine_count; ++i)
		{
			if ( s_engine_data[i][0] == engine )
			{
				Index = i;
				break;
			}
		}

		elFuel.selectedIndex = s_engine_data[Index][4];
		elCycle.selectedIndex = s_engine_data[Index][5];
		elFirst_stage_engine_thrust.value = s_engine_data[Index][1];
		elFirst_stage_isp_sea_level.value = s_engine_data[Index][2];
		elFirst_stage_isp_vac.value = s_engine_data[Index][3];
		if (s_desined_first == true)
			elFirst_stage_engines_number.value = s_engine_data[Index][6];
		updateWeight();
		updateCycle();
		updateFuel();
		SolidChange();
		SetAverages(0,6);
		if (s_desined_first == true)
		{
			elEngine2.selectedIndex = Index/2;
			updateEngine2();
		}

	}

	function updateEngine2()
	{
		var Index = 0;
		var engine = elEngine2.value;
		for (var i=0; i < s_engine_count; ++i)
		{
			if ( s_engine_data[i][0] == engine )
			{
				Index = i;
				break;
			}
		}

		elFuel2.selectedIndex = s_engine_data[Index][4];
		elCycle2.selectedIndex = s_engine_data[Index][5];
		elSecond_stage_engine_thrust.value = s_engine_data[Index][1];
		elSecond_stage_isp_vac.value = s_engine_data[Index][3];
		if (s_desined_first == true)
			elSecond_stage_engines_number.value = s_engine_data[Index][6];
		s_desined_first = false;
		updateWeight();
		updateCycle();
		updateFuel();
		SolidChange();
		SetAverages(0,6);
	}

	function updateWeight()
	{
		if(elRocket.selectedIndex == 0)
		{
			var First_stage_engines_number = (1.*elFirst_stage_engines_number.value).toFixed(0);
			var Second_stage_engines_number = (1.*elSecond_stage_engines_number.value).toFixed(0);
			elFirst_stage_engines_number.value = First_stage_engines_number;
			elSecond_stage_engines_number.value = Second_stage_engines_number;
			Lift_off_Mass = 1./elThrust_to_weight_ratio.value * elFirst_stage_engine_thrust.value * First_stage_engines_number;
			Fairing_mass = parseFloat((0.0045*Lift_off_Mass).toFixed(0));
			Assumed_payload_mass = parseFloat((0.015*Lift_off_Mass).toFixed(0));
			Payload_mass = Assumed_payload_mass;
			Rocket_Mass = Lift_off_Mass - Fairing_mass - Assumed_payload_mass;
			elFairing_mass.value = Fairing_mass;
			elAssumed_payload_mass.value = Assumed_payload_mass;
			elRocket_Mass.value = Rocket_Mass.toFixed(0);
//			elLift_off_Mass.textContent = Lift_off_Mass.toFixed(0);
			var Max_midsection_D = 4.1*Math.pow(Lift_off_Mass/460000.,1/3);
			elMax_midsection_D.value = Max_midsection_D.toFixed(1);
			var SecStage_mass_ratio = 90.909 * elSecond_stage_engine_thrust.value * Second_stage_engines_number / Lift_off_Mass;
			var SecStage_mass_ratio2 =  2 * SecStage_mass_ratio;
			if (SecStage_mass_ratio > 30.) SecStage_mass_ratio = 30.;
			if (SecStage_mass_ratio < 12.) SecStage_mass_ratio = 12.;
			if (SecStage_mass_ratio2 < 12.) SecStage_mass_ratio = SecStage_mass_ratio2;
			el2nd_Stage_mass_ratio.value = SecStage_mass_ratio.toFixed(1);
			Thrust_To_Weight_2st = Second_stage_engines_number*elSecond_stage_engine_thrust.value/(Lift_off_Mass*SecStage_mass_ratio/100.);
			updateFuel();
			SetAverages(0,6);
		}
		Calculate();
	}
	
	function updateSlider(index)
	{
		if (s_fuel_invert[index])
		{
			var vmin;
			var vmax;
			if ("min" in s_slider[index])
				vmin = parseFloat(s_slider[index].min);
			else
				vmin = s_slider[index].getAttribute("min");
			
			if ("max" in s_slider[index])
				vmax = parseFloat(s_slider[index].max);
			else
				vmax = s_slider[index].getAttribute("max");
			s_slider_edit[index].value = ((vmin + vmax - s_slider[index].value) / 100.).toFixed(2);
		} else
			s_slider_edit[index].value = s_slider[index].value / 100.;
		Calculate();
		CalculationError();		
	}

	function updateSlider0(index)
	{
		s_slider_edit[index].value = s_slider[index].value;
		Calculate();
	}
	
	function updateSliderEdit(index)
	{
		var val_min;
		var val_max;

		if (s_fuel_invert[index])
		{
			if ("min" in s_slider[index])
				val_min = parseFloat(s_slider[index].min);
			else
				val_min = s_slider[index].getAttribute("min");
			
			if ("max" in s_slider[index])
				val_max = parseFloat(s_slider[index].max);
			else
				val_max = s_slider[index].getAttribute("max");
			s_slider[index].value = val_min + val_max - s_slider_edit[index].value * 100.;
		} else
			s_slider[index].value =  s_slider_edit[index].value * 100.;
	}

	function updateSliderEdit0(index)
	{
		s_slider[index].value = s_slider_edit[index].value;
	}
	
	function update1st_Dry_to_Wet_mass_ratio_Range()
	{
		Absolute_Mass = 0;
		updateSlider(0);
	}

	function update2nd_Dry_to_Wet_mass_ratio_Range()
	{
		Absolute_Mass = 0;
		updateSlider(1);
	}
	
	function update3rd_Dry_to_Wet_mass_ratio_Range()
	{
		Absolute_Mass = 0;
		updateSlider(2);
	}
	
	function updateUnused_propellant_of_1st_Stage_Range()
	{
		updateSlider(3);
	}
	
	function updateUnused_propellant_of_2nd_Stage_Range()
	{
		updateSlider(4);
	}
	
	function updateUnused_propellant_of_Transfer_Orbit_Stage_Range()
	{
		updateSlider(5);
	}
	
	function updateFirst_stage_isp_sea_level_Range()
	{
		updateSlider(6);
	}
	
	function updateFirst_stage_isp_vac_Range()
	{
		updateSlider(7);
	}
	
	function updateSecond_stage_isp_vac_Range()
	{
		updateSlider(8);
	}
	
	function updateTransfer_Orbit_Stage_isp_Range()
	{
		updateSlider(9);
	}

	function updateSpecific_Impulse_Variation_Range()
	{
		updateSlider0(10);
	}

	function update1st_Dry_to_Wet_mass_ratio()
	{
		updateSliderEdit(0);
	}

	function update2nd_Dry_to_Wet_mass_ratio()
	{
		updateSliderEdit(1);
	}
	
	function update3rd_Dry_to_Wet_mass_ratio()
	{
		updateSliderEdit(2);
	}
	
	function updateUnused_propellant_of_1st_Stage()
	{
		updateSliderEdit(3);
	}
	
	function updateUnused_propellant_of_2nd_Stage()
	{
		updateSliderEdit(4);
	}
	
	function updateUnused_propellant_of_Transfer_Orbit_Stage()
	{
		updateSliderEdit(5);
	}
	
	function updateFirst_stage_isp_sea_level()
	{
		updateSliderEdit(6);
	}
	
	function updateFirst_stage_isp_vac()
	{
		updateSliderEdit(7);
	}
	
	function updateSecond_stage_isp_vac()
	{
		updateSliderEdit(8);
	}
	
	function updateTransfer_Orbit_Stage_isp()
	{
		updateSliderEdit(9);
	}
	
	function updateSpecific_Impulse_Variation()
	{
		updateSliderEdit0(10);
	}
				
	function updateOrbitAndCalc()
	{
		updateOrbit();
		Calculate();
	}
	
	function updateRocket()
	{
		Absolute_Mass = 0;
		elSet_averages.checked = false;
		if (elRocket.selectedIndex == 0)
		{ 
			elLimitation.checked = false;
			elEngine1.selectedIndex = 0;
			elEngine2.selectedIndex = 0;
			s_desined_first = true;
			updateEngine1()
			s_desined_first = true;
		}
		else
			elLimitation.checked = true;

		elThrust_to_weight_ratio.value = s_rocket_data[elRocket.selectedIndex][1];
		elLift_off_Mass.textContent = s_rocket_data[elRocket.selectedIndex][2] + s_rocket_data[elRocket.selectedIndex][4] + s_rocket_data[elRocket.selectedIndex][7];
		elRocket_Mass.value = s_rocket_data[elRocket.selectedIndex][2];

		elMax_midsection_D.value = s_rocket_data[elRocket.selectedIndex][3];
		elFairing_mass.value = s_rocket_data[elRocket.selectedIndex][4];
		elFairing_jettison_velocity.value = s_rocket_data[elRocket.selectedIndex][5];
		elJettisoned_battery_mass.value = s_rocket_data[elRocket.selectedIndex][6];
		elAssumed_payload_mass.value = s_rocket_data[elRocket.selectedIndex][7];
		Payload_mass = parseFloat(elAssumed_payload_mass.value);
		var v2nd_Stage_mass_rat = s_rocket_data[elRocket.selectedIndex][8];
		var v3rd_Stage_mass_rat = s_rocket_data[elRocket.selectedIndex][9];
		var Fairing = s_rocket_data[elRocket.selectedIndex][4];
		var Payload = s_rocket_data[elRocket.selectedIndex][7]; 

		el2nd_Stage_mass_ratio.value = s_rocket_data[elRocket.selectedIndex][8];
		el3rd_Stage_mass_ratio.value = s_rocket_data[elRocket.selectedIndex][9];
	
		el1st_Dry_to_Wet_mass_ratio.value = s_rocket_data[elRocket.selectedIndex][10];
		el2nd_Dry_to_Wet_mass_ratio.value = s_rocket_data[elRocket.selectedIndex][11];
		el3rd_Dry_to_Wet_mass_ratio.value = s_rocket_data[elRocket.selectedIndex][12];
		elUnused_propellant_of_1st_Stage.value = s_rocket_data[elRocket.selectedIndex][13];
		elUnused_propellant_of_2nd_Stage.value = s_rocket_data[elRocket.selectedIndex][14];
		elUnused_propellant_of_Transfer_Orbit_Stage.value = s_rocket_data[elRocket.selectedIndex][15];

		elSpecific_Impulse_Variation.value = 100.;
		updateSliderEdit0(10);
		
		elFirst_stage_isp_sea_level.value =s_rocket_data[elRocket.selectedIndex][16]*elSpecific_Impulse_Variation.value/100.;
		elFirst_stage_isp_vac.value = s_rocket_data[elRocket.selectedIndex][17]*elSpecific_Impulse_Variation.value/100.;
		elSecond_stage_isp_vac.value = s_rocket_data[elRocket.selectedIndex][18]*elSpecific_Impulse_Variation.value/100.;
		elTransfer_Orbit_Stage_isp.value = s_rocket_data[elRocket.selectedIndex][19]*elSpecific_Impulse_Variation.value/100.;
		
		var spacePort = s_rocket_data[elRocket.selectedIndex][26];
		for (var i=0; i < s_start_point_count; ++i)
		{
			if ( s_start_point_data[i][0] == spacePort )
			{
				elStartingPoint.selectedIndex = i;
				updateStartingPoint();
				break;
			}
		}
		
		var orbit = s_rocket_data[elRocket.selectedIndex][27];
		for (var i=0; i < s_orbit_count; ++i)
		{
			if ( s_orbit_data[i][0] == orbit )
			{
				elOrbit.selectedIndex = i;
				updateOrbit();
				break;
			}
		}
		
		elFuel.selectedIndex = s_rocket_data[elRocket.selectedIndex][20];
		elFuel2.selectedIndex = s_rocket_data[elRocket.selectedIndex][22];
		elFuel3.selectedIndex = s_rocket_data[elRocket.selectedIndex][24];
		elCycle.selectedIndex = s_rocket_data[elRocket.selectedIndex][21];
		elCycle2.selectedIndex = s_rocket_data[elRocket.selectedIndex][23];
		elCycle3.selectedIndex = s_rocket_data[elRocket.selectedIndex][25];

		updateFuel();
		SolidChange();
		updateCycle();

		if (elLimitation.checked) SetLimitation();
		elAir_Launch.checked = s_rocket_data[elRocket.selectedIndex][28] != 0;
		AirLaunchChange(0);
		
		elRocketDescription.textContent = s_rocket_data[elRocket.selectedIndex][29];

		if ( el3rd_Stage_mass_ratio.value == 0 )
		{
			elStages.selectedIndex = 0;
		} else
		{
			elStages.selectedIndex = 1;
		}
       		f3stagesChange();

		if (elRocket.selectedIndex == 0)
		{
			for (var i = 0; i < elProjecting.length; i++)
				elProjecting[i].removeAttribute("style");
			for (var i = 0; i < elProjectingH.length; i++)
				elProjectingH[i].setAttribute("style","display:none");
			SetAverages(0,6);
			updateWeight();
			
		} else
		{
			for (var i = 0; i < elProjecting.length; i++)
				elProjecting[i].setAttribute("style","display:none");
			for (var i = 0; i < elProjectingH.length; i++)
				elProjectingH[i].removeAttribute("style");
			DelAverages();
		}
	}
	
	function updateRocketAndCalc()
	{
		updateRocket();
		Calculate();
	}
	
	function ExpandChange()
	{

		if (elExpand.checked || elExpand.getAttribute("isbool") == "1")
		{
			elExpand.setAttribute('isBool',0);
			elExpand.innerHTML = "Show Less";
			for (var i = 0; i < elsExpanding.length; i++)
				elsExpanding[i].removeAttribute("style");
			if(parseFloat(elJettisoned_battery_mass.value) > 0)
			for (var i = 0; i < elsExpandingB.length; i++)
				elsExpandingB[i].removeAttribute("style");
			if(elStages.selectedIndex == 1)
			for (var i = 0; i < elsExpanding3.length; i++)
				elsExpanding3[i].removeAttribute("style");
		} else
		{
			elExpand.setAttribute('isBool',1);
			elExpand.innerHTML = "Advanced...";
			for (var i = 0; i < elsExpanding.length; i++)
				elsExpanding[i].setAttribute("style","display:none");
			for (var i = 0; i < elsExpandingB.length; i++)
				elsExpandingB[i].setAttribute("style","display:none");
			for (var i = 0; i < elsExpanding3.length; i++)
				elsExpanding3[i].setAttribute("style","display:none");
		}
	}

	function f3stagesChange()
	{
		if (el3rd_Stage_mass_ratio.value == 0)
		{
			for (var i = 0; i < els3stages.length; i++)
				els3stages[i].setAttribute("style","display:none");
			for (var i = 0; i < elsExpanding3.length; i++)
				elsExpanding3[i].setAttribute("style","display:none");
		} else
		{
			for (var i = 0; i < els3stages.length; i++)
				els3stages[i].removeAttribute("style");
			if (elExpand.checked)
			for (var i = 0; i < elsExpanding3.length; i++)
				elsExpanding3[i].removeAttribute("style");
		}
	}

	function SolidChange()
	{
		if (elFuel.selectedIndex == 4)
		{
			document.getElementById("Cycle").style.visibility='hidden';
		} else
		{
			document.getElementById("Cycle").style.visibility='visible';
		}

		if (elFuel2.selectedIndex == 4)
		{
			document.getElementById("Cycle2").style.visibility='hidden';
		} else
		{
			document.getElementById("Cycle2").style.visibility='visible';
		}
		if (elFuel3.selectedIndex == 4)
		{
				document.getElementById("Cycle3").style.visibility='hidden';
			} else
			{
				document.getElementById("Cycle3").style.visibility='visible';
		}

	}

	function ElectricChange()
	{
		if (elCycle2.selectedIndex == 2)
		{
			for (var i = 0; i < elsElectric.length; i++)
				elsElectric[i].removeAttribute("style");

		} else
		{
			for (var i = 0; i < elsElectric.length; i++)
				{
				elJettisoned_battery_mass.value = 0.;
				elsElectric[i].setAttribute("style","display:none");
				}
		}

	}
	
	function AirLaunchChange(Checked)
	{
		if (elAir_Launch.checked)
		{
			elLimitation.checked = false;

			var Starting_point_Altitude_Old = parseFloat(elStarting_point_Altitude.value);
			var Starting_point_Pressure_Old = (Math.exp(-Starting_point_Altitude_Old/7.16));
			Starting_point_Altitude = 12;
			elStarting_point_Altitude.value = Starting_point_Altitude;
			elAdditional_Speed.value = 250;
			if(Checked == 1)
			{
			 var Starting_point_Pressure=(Math.exp(-Starting_point_Altitude/7.16));
			 var First_stage_isp_sea_level = parseFloat(elFirst_stage_isp_sea_level.value);
			 var First_stage_isp_vac = parseFloat(elFirst_stage_isp_vac.value);
			 var First_stage_isp_sea_level_ = First_stage_isp_sea_level;
			 First_stage_isp_sea_level = First_stage_isp_vac - (First_stage_isp_vac - First_stage_isp_sea_level)/Starting_point_Pressure_Old * Starting_point_Pressure;
			 elFirst_stage_isp_sea_level.value = First_stage_isp_sea_level;
			 var Thrust_to_weight_ratio = parseFloat(elThrust_to_weight_ratio.value);
			 elThrust_to_weight_ratio.value = Thrust_to_weight_ratio/First_stage_isp_sea_level_*First_stage_isp_sea_level;
			}
		} else
		{
			Starting_point_Altitude_Old = parseFloat(elStarting_point_Altitude.value);
			Starting_point_Pressure_Old = (Math.exp(-Starting_point_Altitude_Old/7.16));
			Starting_point_Altitude = s_start_point_data[elStartingPoint.selectedIndex][3];
			elStarting_point_Altitude.value = Starting_point_Altitude;
			elAdditional_Speed.value = 0;

			Starting_point_Pressure=(Math.exp(-Starting_point_Altitude/7.16));
			First_stage_isp_sea_level = parseFloat(elFirst_stage_isp_sea_level.value);
			First_stage_isp_vac = parseFloat(elFirst_stage_isp_vac.value);
			First_stage_isp_sea_level_ = First_stage_isp_sea_level;
			First_stage_isp_sea_level = First_stage_isp_vac - (First_stage_isp_vac - First_stage_isp_sea_level)/Starting_point_Pressure_Old * Starting_point_Pressure;
			elFirst_stage_isp_sea_level.value = First_stage_isp_sea_level;
			Thrust_to_weight_ratio = parseFloat(elThrust_to_weight_ratio.value);
			elThrust_to_weight_ratio.value = Thrust_to_weight_ratio/First_stage_isp_sea_level_*First_stage_isp_sea_level;
		}
	}
	
	function AirLaunchChangeAndCalc()
	{
		AirLaunchChange(1);
		Calculate();
	}

	function LimitationChange()
	{
		if (elLimitation.checked)
		{
		    SetLimitation();
		    updateFuel();
		    Calculate();
		}
		else
		{
		    DelLimitation();
		    updateFuel();
		    Calculate();
		}
		CalculationError();		
	}

	function SetLimitation()
	{
		var fuel = [0,0,0,0,0,0,0,0,0,0];
		fuel[0] = elFuel.selectedIndex;
		fuel[1] = elFuel2.selectedIndex;
		fuel[2] = elFuel3.selectedIndex;
		fuel[3] = elFuel.selectedIndex;
		fuel[4] = elFuel2.selectedIndex;
		fuel[5] = elFuel3.selectedIndex;
		fuel[6] = elFuel.selectedIndex;
		fuel[7] = elFuel.selectedIndex;
		fuel[8] = elFuel2.selectedIndex;
		fuel[9] = elFuel3.selectedIndex;

		var cycle = [0,0,0,0,0,0,0,0,0,0];
		cycle[0] = elCycle.selectedIndex;
		cycle[1] = elCycle2.selectedIndex;
		cycle[2] = elCycle3.selectedIndex;
		cycle[3] = elCycle.selectedIndex;
		cycle[4] = elCycle2.selectedIndex;
		cycle[5] = elCycle3.selectedIndex;
		cycle[6] = elCycle.selectedIndex;
		cycle[7] = elCycle.selectedIndex;
		cycle[8] = elCycle2.selectedIndex;
		cycle[9] = elCycle3.selectedIndex;

		for (var i = 0; i < 10; ++i)
		{
			var Lift_off_Mass = parseFloat(elLift_off_Mass.textContent);
//			if(Lift_off_Mass > 460000) Lift_off_Mass = 460000;
			var cycle_corr = 1.;
			if(i < 2)
			{
			cycle_corr = 1.;
			if(cycle[i] == 3) cycle_corr = 1.6;
			var orsc_corr = 0.;
			var ThrustToWeight_corr = 0;
			if(i == 0)ThrustToWeight_corr = 0.8*(elThrust_to_weight_ratio.value-1.2);
			if(i == 1)ThrustToWeight_corr = 0.8*(Thrust_To_Weight_2st-1.1);

			if(cycle[i] == 0) orsc_corr = .5;
			if(fuel[i] == 4) {cycle_corr = 1.; orsc_corr = 0.;}
			var val_min = (s_fuel_data_min[fuel[i]][i]+orsc_corr+ThrustToWeight_corr)*cycle_corr*Math.pow(Lift_off_Mass/460000,-.085);
			var val_max = (s_fuel_data_max[fuel[i]][i]+orsc_corr+ThrustToWeight_corr)*cycle_corr*Math.pow(Lift_off_Mass/460000,-.085);
			}
			else
			{
			cycle_corr = 1.;
			if(i > 5) cycle_corr = s_cycle_data[cycle[i]][i-6];
			if(fuel[i] == 3) cycle_corr = 1.;
			if(fuel[i] == 4) cycle_corr = 1.;
			var val_min = s_fuel_data_min[fuel[i]][i]*cycle_corr;
			var val_max = s_fuel_data_max[fuel[i]][i]*cycle_corr;
			}
			
			var input_value = parseFloat(s_slider_edit[i].value);
			if (s_fuel_invert[i] == 1)
			  {if (input_value < val_min)
				s_slider_edit[i].value = val_min.toFixed(3);
			  }
			  else
			  {if (input_value > val_max)
				s_slider_edit[i].value = val_max.toFixed(3);
			  }
		}
	}

	function DelLimitation()
	{
		if (elSet_averages.checked)
		{
		} else
		{
		s_slider_edit[0].value = s_rocket_data[elRocket.selectedIndex][10];
		s_slider_edit[1].value = s_rocket_data[elRocket.selectedIndex][11];
		s_slider_edit[2].value = s_rocket_data[elRocket.selectedIndex][12];
		s_slider_edit[3].value = s_rocket_data[elRocket.selectedIndex][13];
		s_slider_edit[4].value = s_rocket_data[elRocket.selectedIndex][14];
		s_slider_edit[5].value = s_rocket_data[elRocket.selectedIndex][15];
		s_slider_edit[6].value = s_rocket_data[elRocket.selectedIndex][16];
		s_slider_edit[7].value = s_rocket_data[elRocket.selectedIndex][17];
		s_slider_edit[8].value = s_rocket_data[elRocket.selectedIndex][18];
		s_slider_edit[9].value = s_rocket_data[elRocket.selectedIndex][19];
		}
	}

	function Set_averagesChange()
	{
		if (elSet_averages.checked)
		{
		SetAverages(0,10);
		Calculate();
		}
		else
		{
		if (elRocket.selectedIndex > 0) DelAverages();
		}
	}

	function SetAverages(Istr,Ifin)
	{
		for (var i = Istr; i < Ifin; ++i)
			{
			s_slider[i].value = 0.5*(parseFloat(s_slider[i].max)+parseFloat(s_slider[i].min));
			updateSlider(i);
			}
		elSpecific_Impulse_Variation.value = 100.;
		updateSliderEdit0(10);
	}
	
	function DelAverages()
	{
		DelLimitation();
		LimitationChange();
	}

	function MassRecalculate()
	{
		Absolute_Mass = 1;
		elLimitation.checked = false;

		First_stage_propellant_mass = parseFloat(elFirst_stage_propellant_mass.value);
		First_stage_dry_mass = parseFloat(elFirst_stage_dry_mass.value);
		Second_stage_propellant_mass = parseFloat(elSecond_stage_propellant_mass.value);
		Second_stage_dry_mass = parseFloat(elSecond_stage_dry_mass.value);

		if (elStages.selectedIndex > 0)
			{
				Transfer_Orbit_stage_propellant_mass = parseFloat(elTransfer_Orbit_stage_propellant_mass.value);
				Transfer_Orbit_stage_dry_mass = parseFloat(elTransfer_Orbit_stage_dry_mass.value);
			}
			else
			{
				Transfer_Orbit_stage_propellant_mass = 0.;
				Transfer_Orbit_stage_dry_mass = 0.;
			}

		Fairing_mass = parseFloat(elFairing_mass.value);
		Jettisoned_battery_mass = parseFloat(elJettisoned_battery_mass.value);
		Assumed_payload_mass = parseFloat(elAssumed_payload_mass.value);

		Rocket_Mass = First_stage_propellant_mass + First_stage_dry_mass +
				Second_stage_propellant_mass + Second_stage_dry_mass +
				Transfer_Orbit_stage_propellant_mass + Transfer_Orbit_stage_dry_mass;
		elRocket_Mass.value = Rocket_Mass.toFixed(0);

		Lift_off_Mass = Rocket_Mass+ 
				Fairing_mass + Payload_mass_calculated;
		elLift_off_Mass.textContent = Lift_off_Mass.toFixed(0);

		v1st_Dry_to_Wet_mass_ratio = First_stage_dry_mass / (First_stage_propellant_mass + First_stage_dry_mass)*100.
		el1st_Dry_to_Wet_mass_ratio.value = v1st_Dry_to_Wet_mass_ratio.toFixed(3);

		v2nd_Dry_to_Wet_mass_ratio = Second_stage_dry_mass / (Second_stage_propellant_mass + Second_stage_dry_mass)*100.
		el2nd_Dry_to_Wet_mass_ratio.value = v2nd_Dry_to_Wet_mass_ratio.toFixed(3);

		v2nd_Stage_mass_ratio = (Rocket_Mass - First_stage_dry_mass - First_stage_propellant_mass) / Rocket_Mass*100.
		el2nd_Stage_mass_ratio.value = v2nd_Stage_mass_ratio.toFixed(3);

		if (elStages.selectedIndex > 0)
			{
				v3rd_Dry_to_Wet_mass_ratio = Transfer_Orbit_stage_dry_mass / (Transfer_Orbit_stage_propellant_mass + Transfer_Orbit_stage_dry_mass)*100.;
				el3rd_Dry_to_Wet_mass_ratio.value = v3rd_Dry_to_Wet_mass_ratio.toFixed(3);

				v3rd_Stage_mass_ratio = (Rocket_Mass - First_stage_dry_mass - First_stage_propellant_mass - Second_stage_dry_mass - Second_stage_propellant_mass) / Rocket_Mass*100.
				el3rd_Stage_mass_ratio.value = v3rd_Stage_mass_ratio.toFixed(3);
			}
	}

	function MassRecalculateAndCalc()
	{
		MassRecalculate();
		Absolute_Mass = 1;
		Calculate();
	}

	function onPageLoad()
	{
		for (var i = 0; i<s_start_point_count; i++)
		{
			var opt = document.createElement('option');
			opt.value = s_start_point_data[i][0];
			opt.innerHTML = s_start_point_data[i][0];
			opt.title=s_start_point_data[i][5];
			elStartingPoint.appendChild(opt);
		}
		elStartingPoint.addEventListener('change', updateStartingPointAndCalc);
		
		for (var i = 0; i<s_rocket_count; i++)
		{
			var opt = document.createElement('option');
			opt.value = s_rocket_data[i][0];
			opt.innerHTML = s_rocket_data[i][0];
			opt.title=s_rocket_data[i][29];
			elRocket.appendChild(opt);
		}
		elRocket.addEventListener('change', updateRocketAndCalc);
		
		for (var i = 0; i<s_orbit_count; i++)
		{
			var opt = document.createElement('option');
			opt.value = s_orbit_data[i][0];
			opt.innerHTML = s_orbit_data[i][0];
			opt.title=s_orbit_data[i][5];
			elOrbit.appendChild(opt);
		}
		elOrbit.addEventListener('change', updateOrbitAndCalc);
		
		for (var i = 0; i<s_fuel_count; i++)
		{
			var opt = document.createElement('option');
			opt.value = s_fuel_name[i];
			opt.innerHTML = s_fuel_name[i];
			elFuel.appendChild(opt);
		}
		elFuel.addEventListener('change', updateFuelAndCalc);

		for (var i = 0; i<s_fuel_count; i++)
		{
			var opt = document.createElement('option');
			opt.value = s_fuel_name[i];
			opt.innerHTML = s_fuel_name[i];
			elFuel2.appendChild(opt);
		}
		elFuel2.addEventListener('change', updateFuelAndCalc);

		for (var i = 0; i<s_fuel_count; i++)
		{
			var opt = document.createElement('option');
			opt.value = s_fuel_name[i];
			opt.innerHTML = s_fuel_name[i];
			elFuel3.appendChild(opt);
		}
		elFuel3.addEventListener('change', updateFuelAndCalc);

		for (var i = 0; i<s_cycle_count; i++)
		{
			var opt = document.createElement('option');
			opt.value = s_cycle_name[i][0];
			opt.innerHTML = s_cycle_name[i][0];
			opt.title=s_cycle_name[i][1];
			elCycle.appendChild(opt);
		}
		elCycle.addEventListener('change', updateCycleAndCalc);

		for (var i = 0; i<s_cycle_count; i++)
		{
			var opt = document.createElement('option');
			opt.value = s_cycle_name[i][0];
			opt.innerHTML = s_cycle_name[i][0];
			opt.title=s_cycle_name[i][1];
			elCycle2.appendChild(opt);
		}
		elCycle2.addEventListener('change', updateCycleAndCalc);

		for (var i = 0; i<s_cycle_count; i++)
		{
			var opt = document.createElement('option');
			opt.value = s_cycle_name[i][0];
			opt.innerHTML = s_cycle_name[i][0];
			opt.title=s_cycle_name[i][1];
			elCycle3.appendChild(opt);
		}
		elCycle3.addEventListener('change', updateCycleAndCalc);
		
		for (var i = 0; i<s_stages_count; i++)
		{
			var opt = document.createElement('option');
			opt.value = s_stages_name[i];
			opt.innerHTML = s_stages_name[i];
			elStages.appendChild(opt);
		}
		elStages.addEventListener('change', updateStages);

		for (var i = 0; i<s_engine_count; i++)
		{
			var opt = document.createElement('option');
			if ( s_engine_data[i][2] > 0)
			{
				opt.value = s_engine_data[i][0];
				opt.innerHTML = s_engine_data[i][0];
				opt.title=s_engine_data[i][7];
				elEngine1.appendChild(opt);
			}
		}
		elEngine1.addEventListener('change', updateEngine1);

		for (var i = 0; i<s_engine_count; i++)
		{
			var opt = document.createElement('option');
			if ( s_engine_data[i][2] == 0)
			{
				opt.value = s_engine_data[i][0];
				opt.innerHTML = s_engine_data[i][0];
				opt.title=s_engine_data[i][7];
				elEngine2.appendChild(opt);
			}
		}
		elEngine2.addEventListener('change', updateEngine2);

		el1st_Dry_to_Wet_mass_ratio_Range.addEventListener('change', update1st_Dry_to_Wet_mass_ratio_Range);
		el2nd_Dry_to_Wet_mass_ratio_Range.addEventListener('change', update2nd_Dry_to_Wet_mass_ratio_Range);
		el3rd_Dry_to_Wet_mass_ratio_Range.addEventListener('change', update3rd_Dry_to_Wet_mass_ratio_Range);
		elUnused_propellant_of_1st_Stage_Range.addEventListener('change', updateUnused_propellant_of_1st_Stage_Range);
		elUnused_propellant_of_2nd_Stage_Range.addEventListener('change', updateUnused_propellant_of_2nd_Stage_Range);
		elUnused_propellant_of_Transfer_Orbit_Stage_Range.addEventListener('change', updateUnused_propellant_of_Transfer_Orbit_Stage_Range);
		elFirst_stage_isp_sea_level_Range.addEventListener('change', updateFirst_stage_isp_sea_level_Range);
		elFirst_stage_isp_vac_Range.addEventListener('change', updateFirst_stage_isp_vac_Range);
		elSecond_stage_isp_vac_Range.addEventListener('change', updateSecond_stage_isp_vac_Range);
		elTransfer_Orbit_Stage_isp_Range.addEventListener('change', updateTransfer_Orbit_Stage_isp_Range);
		elSpecific_Impulse_Variation_Range.addEventListener('change', updateSpecific_Impulse_Variation_Range);

		el1st_Dry_to_Wet_mass_ratio.addEventListener('change', update1st_Dry_to_Wet_mass_ratio);
		el2nd_Dry_to_Wet_mass_ratio.addEventListener('change', update2nd_Dry_to_Wet_mass_ratio);
		el3rd_Dry_to_Wet_mass_ratio.addEventListener('change', update3rd_Dry_to_Wet_mass_ratio);
		elUnused_propellant_of_1st_Stage.addEventListener('change', updateUnused_propellant_of_1st_Stage);
		elUnused_propellant_of_2nd_Stage.addEventListener('change', updateUnused_propellant_of_2nd_Stage);
		elUnused_propellant_of_Transfer_Orbit_Stage.addEventListener('change', updateUnused_propellant_of_Transfer_Orbit_Stage);
		elFirst_stage_isp_sea_level.addEventListener('change', updateFirst_stage_isp_sea_level);
		elFirst_stage_isp_vac.addEventListener('change', updateFirst_stage_isp_vac);
		elSecond_stage_isp_vac.addEventListener('change', updateSecond_stage_isp_vac);
		elTransfer_Orbit_Stage_isp.addEventListener('change', updateTransfer_Orbit_Stage_isp);
		elSpecific_Impulse_Variation.addEventListener('change', updateSpecific_Impulse_Variation);
					
		elStarting_point_Altitude.addEventListener('change', Calculate);
		elAdditional_Speed.addEventListener('change', Calculate);
		elOrbit_Perigee.addEventListener('change', OrbitChange);
		elOrbit_Apogee.addEventListener('change', OrbitChange);
		elSpaceport_latitude.addEventListener('change', LatitudeChange);
		elOrbit_Inclination.addEventListener('change', InclinationChange);

		elFirst_stage_engine_thrust.addEventListener('change', updateWeight);
		elFirst_stage_engines_number.addEventListener('change', updateWeight);
		elSecond_stage_engine_thrust.addEventListener('change', updateWeight);
		elSecond_stage_engines_number.addEventListener('change', updateWeight);
		
		elThrust_to_weight_ratio.addEventListener('change', updateWeight);
		elRocket_Mass.addEventListener('change', Calculate_Rel);
		elMax_midsection_D.addEventListener('change', Calculate);
		elFairing_mass.addEventListener('change', Calculate);
		elFairing_jettison_velocity.addEventListener('change', Calculate);
		elJettisoned_battery_mass.addEventListener('change', Calculate);
		elAssumed_payload_mass.addEventListener('change', Calculate);
		el2nd_Stage_mass_ratio.addEventListener('change', Calculate_Rel);
		el3rd_Stage_mass_ratio.addEventListener('change', Calculate_Rel);
		el1st_Dry_to_Wet_mass_ratio.addEventListener('change', Calculate_Rel);
		el2nd_Dry_to_Wet_mass_ratio.addEventListener('change', Calculate_Rel);
		el3rd_Dry_to_Wet_mass_ratio.addEventListener('change', Calculate_Rel);
		elUnused_propellant_of_1st_Stage.addEventListener('change', Calculate);
		elUnused_propellant_of_2nd_Stage.addEventListener('change', Calculate);
		elUnused_propellant_of_Transfer_Orbit_Stage.addEventListener('change', Calculate);
		elFirst_stage_isp_sea_level.addEventListener('change', Calculate);
		elFirst_stage_isp_vac.addEventListener('change', Calculate);
		elSecond_stage_isp_vac.addEventListener('change', Calculate);
		elTransfer_Orbit_Stage_isp.addEventListener('change', Calculate);
		elSpecific_Impulse_Variation.addEventListener('change', Calculate);

		elExtra_speed_for_flight_to_the_planets.addEventListener('change', Calculate);
		elFirst_stage_propellant_mass.addEventListener('change', MassRecalculateAndCalc);
		elFirst_stage_dry_mass.addEventListener('change', MassRecalculateAndCalc);
		elSecond_stage_propellant_mass.addEventListener('change', MassRecalculateAndCalc);
		elSecond_stage_dry_mass.addEventListener('change', MassRecalculateAndCalc);
      		elTransfer_Orbit_stage_propellant_mass.addEventListener('change', MassRecalculateAndCalc);
		elTransfer_Orbit_stage_dry_mass.addEventListener('change', MassRecalculateAndCalc);

		elRocket.selectedIndex = 1;
		updateEngine1();
		updateEngine2();

		elExpand.checked = false;
		elExpand.addEventListener('click', ExpandChange);
		ExpandChange();
		f3stagesChange();
		elAir_Launch.checked = false;
		elAir_Launch.addEventListener('change', AirLaunchChangeAndCalc);

		elLimitation.checked = true;
		elLimitation.addEventListener('change', LimitationChange);

		elSet_averages.checked = false;
		elSet_averages.addEventListener('change', Set_averagesChange);
		
		updateRocket();
		updateStartingPoint();
		updateOrbit();
		updateCycle();
		updateFuel();
	  
		updateStages();
		Calculate();
	}

	function onPageUnload()
	{
	mywindow.close();
	}

</SCRIPT>
</BODY></HTML>